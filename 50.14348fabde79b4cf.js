(self.webpackChunkWebsite=self.webpackChunkWebsite||[]).push([[50],{9050:(ze,xe,Z)=>{"use strict";Z.r(xe),Z.d(xe,{HomeModule:()=>Ne});var K=Z(6895),y=Z(9299),I=Z(4672),de=Z.n(I),Y=Z(5108),s=Z(4650),$=Z(1100),ne=Z(529),G=Z(1481),H=Z(4006);function W(V,oe){if(1&V&&(s.TgZ(0,"div",52)(1,"div",53),s._UZ(2,"a",54)(3,"img",55),s.TgZ(4,"a",56),s._uU(5),s.qZA()()()),2&V){const D=oe.$implicit;s.xp6(3),s.Q6J("src",D.images,s.LSH),s.xp6(2),s.Oqu(D.title)}}function F(V,oe){if(1&V&&(s.TgZ(0,"div",57)(1,"div",58)(2,"div",1)(3,"div",59)(4,"span"),s._uU(5,"New"),s.qZA()(),s._UZ(6,"div",60),s.TgZ(7,"a",61),s._UZ(8,"i",62),s.qZA(),s._UZ(9,"img",63)(10,"a",64),s.TgZ(11,"div",65),s._UZ(12,"div",66),s.TgZ(13,"div",5)(14,"div",7),s._UZ(15,"a",8)(16,"a",67)(17,"a",68)(18,"a",69)(19,"a",70)(20,"div",71),s.qZA()(),s.TgZ(21,"a",72),s._uU(22),s.qZA(),s._UZ(23,"p",73),s.TgZ(24,"a",74),s._uU(25,"Add to cart"),s.qZA(),s.TgZ(26,"p",75),s._UZ(27,"i",76),s._uU(28,"Free Shipping in 24 hours"),s.qZA()()(),s.TgZ(29,"div",77)(30,"div",5)(31,"div",7),s._UZ(32,"a",8)(33,"a",67)(34,"a",68)(35,"a",69)(36,"a",70)(37,"div",71),s.qZA()(),s.TgZ(38,"a",72),s._uU(39),s.qZA(),s.TgZ(40,"div",78)(41,"a",79),s._uU(42),s.qZA()(),s.TgZ(43,"p",73),s._UZ(44,"del"),s._uU(45),s.qZA()()()()),2&V){const D=oe.$implicit;s.xp6(7),s.MGl("routerLink","/details/",D.id,""),s.xp6(2),s.Q6J("src",D.images,s.LSH),s.xp6(1),s.MGl("routerLink","/details/",D.id,""),s.xp6(12),s.Oqu(D.title),s.xp6(17),s.Oqu(D.title),s.xp6(3),s.Oqu(D.category),s.xp6(3),s.hij("$",D.price," ")}}function _(V,oe){if(1&V){const D=s.EpF();s.TgZ(0,"div",80),s.NdJ("click",function(){s.CHM(D);const ue=s.oxw();return s.KtG(ue.checkChat())}),s._UZ(1,"i",81),s.qZA()}}function k(V,oe){1&V&&s._UZ(0,"img",118)}function N(V,oe){if(1&V&&(s.TgZ(0,"div",102),s._uU(1),s.qZA()),2&V){const D=oe.$implicit;s.xp6(1),s.hij(" ",D," ")}}function re(V,oe){if(1&V){const D=s.EpF();s.TgZ(0,"div",82)(1,"div",83)(2,"div",84)(3,"div",85)(4,"div",86)(5,"div",87)(6,"h3",88),s._uU(7,"Chat Messages"),s.qZA(),s.TgZ(8,"div",89)(9,"button",90),s._UZ(10,"i",91),s.qZA(),s.TgZ(11,"button",92),s._UZ(12,"i",93),s.qZA(),s.TgZ(13,"button",94),s.NdJ("click",function(){s.CHM(D);const ue=s.oxw();return s.KtG(ue.closeChat())}),s._UZ(14,"i",95),s.qZA()()(),s.TgZ(15,"div",96)(16,"div",97)(17,"div",98)(18,"div",99)(19,"span",100),s._uU(20,"Value Clean "),s.qZA()(),s._UZ(21,"img",101),s.TgZ(22,"div",102),s._uU(23," Hi,How Can I Help You ? "),s.qZA()(),s.TgZ(24,"div",103)(25,"div",99)(26,"span",104),s._uU(27,"Sarah Bullock"),s.qZA(),s._UZ(28,"span",105),s.qZA(),s.YNc(29,k,1,0,"img",106),s.YNc(30,N,2,1,"div",107),s.qZA()()(),s.TgZ(31,"div",108)(32,"form")(33,"div",17)(34,"div",109)(35,"button",110),s.NdJ("click",function(){s.CHM(D);const ue=s.oxw();return s.KtG(ue.submit())}),s._UZ(36,"i",111),s.qZA()(),s.TgZ(37,"div",112)(38,"div",113)(39,"input",114),s.NdJ("change",function(ue){s.CHM(D);const He=s.oxw();return s.KtG(He.select(ue))}),s.qZA()()(),s.TgZ(40,"div",109)(41,"button",110),s.NdJ("click",function(){s.CHM(D);const ue=s.oxw();return s.KtG(ue.submit())}),s._UZ(42,"i",115),s.qZA()(),s.TgZ(43,"div",109)(44,"button",116),s.NdJ("click",function(){s.CHM(D);const ue=s.oxw();return s.KtG(ue.submit())}),s._UZ(45,"i",117),s.qZA()()()()()()()()()()}if(2&V){const D=s.oxw();s.xp6(29),s.Q6J("ngIf",D.imgs),s.xp6(1),s.Q6J("ngForOf",D.messages)}}function ie(V,oe){1&V&&(s.TgZ(0,"div",119)(1,"div",120),s._UZ(2,"div",121)(3,"div",121)(4,"div",121)(5,"div",121)(6,"div",121),s.qZA()())}const be=[{path:"",component:(()=>{class V{constructor(D,ae,ue,He){this.serv=D,this.router=ae,this.http=ue,this.domSanitizer=He,this.cart=[],this.all=[],this.user=null,this.cat=[],this.loader=!1,this.insertChat=!1,this.insertIcon=!0,this.userChat=[],this.datarom=[],this.messages=[],this.dataShow=[],this.message="",this.showMessage=[],this.odlMessages=[],this.recording=!1,this.options=[],this.url="",this.error="",this.imgs=!1,this.cahtHome=!1}ngOnInit(){this.getcat(),this.getAll(),this.get(),de().logToConsole=!0,new(de())("cbe947b09a127d1d6084",{cluster:"mt1"}).subscribe("new-message").bind("new-message",ue=>(console.log(ue.message.message),this.messages.push(ue.message.message)))}channel(D){throw new Error("Method not implemented.")}submit(){return this.http.post("https://api.valuclean.co/api/store-message",{message:this.message}).subscribe(()=>this.message="")}select(D){this.message=D.target.value}getAll(){this.serv.showService().subscribe(D=>{for(let ae=0;ae<D.data.length;ae++)if(this.all.push(D.data[ae]),7==ae){console.log(this.all);break}})}getcat(){this.serv.showCat().subscribe(D=>{this.cat=D.categories})}logout(){localStorage.removeItem("token"),this.router.navigateByUrl("/login")}checkChat(){this.insertIcon=!1,this.insertChat=!0}closeChat(){this.insertIcon=!0,this.insertChat=!1}get(){this.data=this.http.post("https://api.valuclean.co/api/room-messages",{id:7}).subscribe(D=>{this.data=D,this.odlMessages=this.data.data},D=>{console.error(D)})}sanitize(D){return this.domSanitizer.bypassSecurityTrustUrl(D)}start(){return this.recording=!0,navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(this.successCallback.bind(this),this.errorCallback.bind(this)),this.url}successCallback(D){this.record=new(0,Y.StereoAudioRecorder)(D,{mimeType:"audio/wav"}),this.record.record()}stop(){this.recording=!1,this.record.stop(this.processRecording.bind(this))}processRecording(D){return this.url=URL.createObjectURL(D),this.url}errorCallback(D){alert("onn")}}return V.\u0275fac=function(D){return new(D||V)(s.Y36($.R),s.Y36(y.F0),s.Y36(ne.eN),s.Y36(G.H7))},V.\u0275cmp=s.Xpm({type:V,selectors:[["app-home"]],decls:94,vars:5,consts:[[1,"ps-product--banner"],[1,"ps-product__thumbnail"],["href","#"],["src","../../../assets/imgs/626 - 626 Character Valu Clean.png","alt",""],[1,"animate__animated","animate__slideInUp","ps-product__content"],[1,"br-wrapper","br-theme-fontawesome-stars"],[1,"ps-rating",2,"display","none"],[1,"br-widget"],["href","#","data-rating-value","1","data-rating-text","1",1,"br-selected","br-current"],[1,"ps-product__actions"],["routerLink","/contact",1,"ps-btn"],[1,"ps-section","ps-home-categories"],[1,"ps-container"],[1,"ps-section__header","text-center"],[1,"ps-section__title"],[1,"ps-section__line"],[1,"ps-section__content","ps-col-tiny"],[1,"row"],["class"," col-lg-2 col-md-3 col-sm-3 col-xs-12 ",4,"ngFor","ngForOf"],[1,"ps-section__footer","text-center"],["href","#",1,"ps-btn",2,"font-size","21px","padding","21px"],[1,"ps-section","ps-home-best-product"],[1,"ps-section__content","mt-100"],["class","col-lg-3 col-md-4 col-sm-6 col-xs-12 ",4,"ngFor","ngForOf"],["routerLink","/detalisservice",1,"ps-btn",2,"font-size","21px","padding","21px"],[1,"ps-partners"],["data-owl-auto","true","data-owl-loop","true","data-owl-speed","5000","data-owl-gap","50","data-owl-nav","false","data-owl-dots","false","data-owl-item","7","data-owl-item-xs","3","data-owl-item-sm","5","data-owl-item-md","6","data-owl-item-lg","7","data-owl-duration","1000","data-owl-mousedrag","on",1,"ps-slider--partners","owl-slider","owl-carousel","owl-theme","owl-loaded"],[1,"owl-stage-outer"],[1,"owl-stage",2,"transform","translate3d(-2451.43px, 0px, 0px)","transition","all 1s ease 0s","width","4290.01px"],[1,"owl-item","cloned",2,"width","154.286px","margin-right","50px"],["src","../../../assets/images/partner/1.png","alt",""],["src","images/partner/7.png","alt",""],[1,"owl-item",2,"width","154.286px","margin-right","50px"],["src","images/partner/1.png","alt",""],["src","images/partner/2.png","alt",""],["src","images/partner/3.png","alt",""],["src","images/partner/4.png","alt",""],["src","images/partner/5.png","alt",""],[1,"owl-item","active",2,"width","154.286px","margin-right","50px"],["src","images/partner/6.png","alt",""],[1,"owl-item","cloned","active",2,"width","154.286px","margin-right","50px"],[1,"owl-controls"],[1,"owl-nav"],[1,"owl-prev",2,"display","none"],[1,"fa","fa-angle-left"],[1,"owl-next",2,"display","none"],[1,"fa","fa-angle-right"],[1,"owl-dots",2,"display","none"],[1,"chatt","d-flex","align-items-end","flex-column"],["style","color:rgb(255, 145, 0) ;position:fixed;z-index:4;font-size:64px;margin-right:20px",3,"click",4,"ngIf"],["class","page-content page-container","id","page-content","style","position:fixed;bottom:0;z-index:1",4,"ngIf"],["id","pre-loader",4,"ngIf"],[1,"col-lg-2","col-md-3","col-sm-3","col-xs-12"],["data-mh","category",1,"ps-block--category","animate__animated","animate__lightSpeedInLeft",2,"height","205px"],[1,"ps-block__overlay"],["alt","",2,"width","114px","height","103px","border-radius","45px",3,"src"],[2,"margin-top","19px"],[1,"col-lg-3","col-md-4","col-sm-6","col-xs-12"],[1,"ps-product",2,"margin-bottom","109px","width","90%"],[1,"ps-badge"],[1,"ps-badge","ps-badge--sale"],[1,"ps-product__favorite",3,"routerLink"],[1,"furniture-heart"],["alt","",2,"width","307.773px","height","307.773px",3,"src"],[1,"ps-product__overlay",3,"routerLink"],[1,"ps-product__content","full"],[1,"ps-product__variants"],["href","#","data-rating-value","1","data-rating-text","2",1,"br-selected","br-current"],["href","#","data-rating-value","1","data-rating-text","3",1,"br-selected","br-current"],["href","#","data-rating-value","1","data-rating-text","4",1,"br-selected","br-current"],["href","#","data-rating-value","2","data-rating-text","5"],[1,"br-current-rating"],["href","product-detail-2.html",1,"ps-product__title"],[1,"ps-product__price"],["href","product-detail-2.html",1,"ps-btn","ps-btn--sm"],[1,"ps-product__feature"],[1,"furniture-delivery-truck-2"],[1,"ps-product__content"],[1,"ps-product__categories"],["href","product-listing.html"],[2,"color","rgb(255, 145, 0)","position","fixed","z-index","4","font-size","64px","margin-right","20px",3,"click"],["aria-hidden","true",1,"fa","fa-commenting"],["id","page-content",1,"page-content","page-container",2,"position","fixed","bottom","0","z-index","1"],[1,"padding"],[1,"row","container","d-flex","justify-content-end"],[1,"col-md-4"],[1,"box","box-warning","direct-chat","direct-chat-warning"],[1,"box-header","with-border"],[1,"box-title"],[1,"box-tools","pull-right"],["type","button","data-widget","collapse",1,"btn","btn-box-tool"],[1,"fa","fa-minus"],["type","button","data-toggle","tooltip","title","","data-widget","chat-pane-toggle","data-original-title","Contacts",1,"btn","btn-box-tool"],[1,"fa","fa-comments"],["type","button","data-widget","remove",1,"btn","btn-box-tool",3,"click"],[1,"fa","fa-times"],[1,"box-body"],[1,"direct-chat-messages"],[1,"direct-chat-msg"],[1,"direct-chat-info","clearfix"],[1,"direct-chat-name","pull-left"],["src","https://img.icons8.com/color/36/000000/administrator-male.png","alt","message user image",1,"direct-chat-img"],[1,"direct-chat-text"],[1,"direct-chat-msg","right"],[1,"direct-chat-name","pull-right"],[1,"direct-chat-timestamp","pull-left"],["class","direct-chat-img","src","https://img.icons8.com/office/36/000000/person-female.png","alt","message user image",4,"ngIf"],["class","direct-chat-text",4,"ngFor","ngForOf"],[1,"box-footer"],[1,"col-md-1",2,"margin","0px 1px 1px 1px"],["type","button",1,"btn","btn-warning","btn-flat",2,"background","none","border","none","color","black",3,"click"],[1,"fas","fa-camera"],[1,"col-md-8"],[1,"input-group"],["type","text","placeholder","Type Message ...",1,"form-control",3,"change"],[1,"fas","fa-microphone"],["type","button",1,"btn","btn-warning","btn-flat",3,"click"],[1,"ti-clip"],["src","https://img.icons8.com/office/36/000000/person-female.png","alt","message user image",1,"direct-chat-img"],["id","pre-loader"],[1,"loader"],[1,"loader__item"]],template:function(D,ae){1&D&&(s.TgZ(0,"div",0)(1,"div",1)(2,"a",2),s._UZ(3,"img",3),s.qZA()(),s.TgZ(4,"div",4)(5,"div",5),s._UZ(6,"select",6),s.TgZ(7,"div",7),s._UZ(8,"a",8),s.qZA()(),s.TgZ(9,"div",9)(10,"a",10),s._uU(11,"Contact Us"),s.qZA()()()(),s.TgZ(12,"div",11)(13,"div",12)(14,"div",13)(15,"h3",14),s._uU(16,"All Category"),s.qZA(),s._UZ(17,"span",15),s.qZA(),s.TgZ(18,"div",16)(19,"div",17),s.YNc(20,W,6,2,"div",18),s.qZA()(),s.TgZ(21,"div",19)(22,"a",20),s._uU(23,"View all categories"),s.qZA()()()(),s.TgZ(24,"div",21)(25,"div",12)(26,"div",13)(27,"h3",14),s._uU(28,"Best Our Services"),s.qZA(),s._UZ(29,"span",15),s.qZA(),s.TgZ(30,"div",22)(31,"div",17),s.YNc(32,F,46,7,"div",23),s.qZA()()(),s.TgZ(33,"div",19)(34,"a",24),s._uU(35,"View all Services"),s.qZA()()(),s.TgZ(36,"div",25)(37,"div",12)(38,"div",26)(39,"div",27)(40,"div",28)(41,"div",29),s._UZ(42,"img",30),s.qZA(),s.TgZ(43,"div",29),s._UZ(44,"img",30),s.qZA(),s.TgZ(45,"div",29),s._UZ(46,"img",30),s.qZA(),s.TgZ(47,"div",29),s._UZ(48,"img",30),s.qZA(),s.TgZ(49,"div",29),s._UZ(50,"img",30),s.qZA(),s.TgZ(51,"div",29),s._UZ(52,"img",30),s.qZA(),s.TgZ(53,"div",29),s._UZ(54,"img",31),s.qZA(),s.TgZ(55,"div",32),s._UZ(56,"img",33),s.qZA(),s.TgZ(57,"div",32),s._UZ(58,"img",34),s.qZA(),s.TgZ(59,"div",32),s._UZ(60,"img",35),s.qZA(),s.TgZ(61,"div",32),s._UZ(62,"img",36),s.qZA(),s.TgZ(63,"div",32),s._UZ(64,"img",37),s.qZA(),s.TgZ(65,"div",38),s._UZ(66,"img",39),s.qZA(),s.TgZ(67,"div",38),s._UZ(68,"img",31),s.qZA(),s.TgZ(69,"div",40),s._UZ(70,"img",33),s.qZA(),s.TgZ(71,"div",40),s._UZ(72,"img",34),s.qZA(),s.TgZ(73,"div",40),s._UZ(74,"img",35),s.qZA(),s.TgZ(75,"div",40),s._UZ(76,"img",36),s.qZA(),s.TgZ(77,"div",40),s._UZ(78,"img",37),s.qZA(),s.TgZ(79,"div",29),s._UZ(80,"img",39),s.qZA(),s.TgZ(81,"div",29),s._UZ(82,"img",30),s.qZA()()(),s.TgZ(83,"div",41)(84,"div",42)(85,"div",43),s._UZ(86,"i",44),s.qZA(),s.TgZ(87,"div",45),s._UZ(88,"i",46),s.qZA()(),s._UZ(89,"div",47),s.qZA()()()(),s.TgZ(90,"div",48),s.YNc(91,_,2,0,"div",49),s.YNc(92,re,46,2,"div",50),s.qZA(),s.YNc(93,ie,7,0,"div",51)),2&D&&(s.xp6(20),s.Q6J("ngForOf",ae.cat),s.xp6(12),s.Q6J("ngForOf",ae.all),s.xp6(59),s.Q6J("ngIf",ae.insertIcon),s.xp6(1),s.Q6J("ngIf",ae.insertChat),s.xp6(1),s.Q6J("ngIf",ae.loader))},dependencies:[K.sg,K.O5,y.rH,H._Y,H.JL,H.F],styles:['@import"https://fonts.googleapis.com/css2?family=Oswald&display=swap";@import"https://fonts.googleapis.com/css2?family=Bona+Nova:ital,wght@0,700;1,400&display=swap";body[_ngcontent-%COMP%], a[_ngcontent-%COMP%], li[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{text-transform:none!important}.mylogin[_ngcontent-%COMP%]{margin-left:215px;margin-top:-144px;width:143px;border:2px solid #519f10;cursor:pointer;border-radius:9px;height:41px;font-size:15px;font-weight:800}.mylogin[_ngcontent-%COMP%]:hover{background-color:transparent;color:#000;border:1px solid #000}.logo[_ngcontent-%COMP%]{margin:19px 0 0}.slider-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0}.my[_ngcontent-%COMP%]{border-bottom:1px solid black;width:50px;font-family:Oswald,sans-serif}.ps-product__variants[_ngcontent-%COMP%]   owl-carousel[_ngcontent-%COMP%]   owl-theme[_ngcontent-%COMP%]   owl-loaded[_ngcontent-%COMP%]{display:none}.ps-product[_ngcontent-%COMP%]:hover   .full[_ngcontent-%COMP%]{visibility:visible;opacity:1;margin-top:-90px}.chatt[_ngcontent-%COMP%]{border:1px solid;position:absolute;z-index:444;top:80%;right:0%}.stretch-card[_ngcontent-%COMP%] > .card[_ngcontent-%COMP%]{width:100%;min-width:100%}body[_ngcontent-%COMP%]{background-color:#f9f9fa}.flex[_ngcontent-%COMP%]{flex:1 1 auto}@media (max-width:991.98px){.padding[_ngcontent-%COMP%]{padding:1.5rem}}@media (max-width:767.98px){.padding[_ngcontent-%COMP%]{padding:1rem}}.padding[_ngcontent-%COMP%]{padding:3rem}.box.box-warning[_ngcontent-%COMP%]{border-top-color:#f39c12}.box[_ngcontent-%COMP%]{position:relative;border-radius:3px;background:#ffffff;border-top:3px solid #d2d6de;margin-bottom:20px;width:100%;box-shadow:0 1px 1px #0000001a}.box-header.with-border[_ngcontent-%COMP%]{border-bottom:1px solid #f4f4f4}.box-header[_ngcontent-%COMP%]{color:#444;display:block;padding:10px;position:relative}.box-header[_ngcontent-%COMP%] > .fa[_ngcontent-%COMP%], .box-header[_ngcontent-%COMP%] > .glyphicon[_ngcontent-%COMP%], .box-header[_ngcontent-%COMP%] > .ion[_ngcontent-%COMP%], .box-header[_ngcontent-%COMP%]   .box-title[_ngcontent-%COMP%]{display:inline-block;font-size:18px;margin:0;line-height:1}.box-header[_ngcontent-%COMP%] > .box-tools[_ngcontent-%COMP%]{position:absolute;right:10px;top:5px}.box-header[_ngcontent-%COMP%] > .box-tools[_ngcontent-%COMP%]   [data-toggle=tooltip][_ngcontent-%COMP%]{position:relative}.bg-yellow[_ngcontent-%COMP%], .callout.callout-warning[_ngcontent-%COMP%], .alert-warning[_ngcontent-%COMP%], .label-warning[_ngcontent-%COMP%], .modal-warning[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{background-color:#f39c12!important}.bg-yellow[_ngcontent-%COMP%]{color:#fff!important}.btn[_ngcontent-%COMP%]{border-radius:3px;box-shadow:none;border:1px solid transparent}.btn-box-tool[_ngcontent-%COMP%]{padding:5px;font-size:12px;background:transparent;color:#97a0b3}.direct-chat[_ngcontent-%COMP%]   .box-body[_ngcontent-%COMP%]{border-bottom-right-radius:0;border-bottom-left-radius:0;position:relative;overflow-x:hidden;padding:0}.box-body[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:10px}.direct-chat-messages[_ngcontent-%COMP%]{transform:translate(0);padding:10px;height:250px;overflow:auto}.direct-chat-messages[_ngcontent-%COMP%], .direct-chat-contacts[_ngcontent-%COMP%]{transition:transform .5s ease-in-out}.direct-chat-msg[_ngcontent-%COMP%]{margin-bottom:10px}.direct-chat-timestamp[_ngcontent-%COMP%]{color:#999}.btn-group-vertical[_ngcontent-%COMP%] > .btn-group[_ngcontent-%COMP%]:after, .btn-group-vertical[_ngcontent-%COMP%] > .btn-group[_ngcontent-%COMP%]:before, .btn-toolbar[_ngcontent-%COMP%]:after, .btn-toolbar[_ngcontent-%COMP%]:before, .clearfix[_ngcontent-%COMP%]:after, .clearfix[_ngcontent-%COMP%]:before, .container-fluid[_ngcontent-%COMP%]:after, .container-fluid[_ngcontent-%COMP%]:before, .container[_ngcontent-%COMP%]:after, .container[_ngcontent-%COMP%]:before, .dl-horizontal[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]:after, .dl-horizontal[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]:before, .form-horizontal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:after, .form-horizontal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:before, .modal-footer[_ngcontent-%COMP%]:after, .modal-footer[_ngcontent-%COMP%]:before, .modal-header[_ngcontent-%COMP%]:after, .modal-header[_ngcontent-%COMP%]:before, .nav[_ngcontent-%COMP%]:after, .nav[_ngcontent-%COMP%]:before, .navbar-collapse[_ngcontent-%COMP%]:after, .navbar-collapse[_ngcontent-%COMP%]:before, .navbar-header[_ngcontent-%COMP%]:after, .navbar-header[_ngcontent-%COMP%]:before, .navbar[_ngcontent-%COMP%]:after, .navbar[_ngcontent-%COMP%]:before, .pager[_ngcontent-%COMP%]:after, .pager[_ngcontent-%COMP%]:before, .panel-body[_ngcontent-%COMP%]:after, .panel-body[_ngcontent-%COMP%]:before, .row[_ngcontent-%COMP%]:after, .row[_ngcontent-%COMP%]:before{display:table;content:" "}.direct-chat-img[_ngcontent-%COMP%]{border-radius:50%;float:left;width:40px;height:40px}.direct-chat-text[_ngcontent-%COMP%]{border-radius:5px;position:relative;padding:5px 10px;background:#d2d6de;border:1px solid #d2d6de;margin:5px 0 0 50px;color:#444}.direct-chat-msg[_ngcontent-%COMP%], .direct-chat-text[_ngcontent-%COMP%]{display:block}.direct-chat-text[_ngcontent-%COMP%]:before{border-width:6px;margin-top:-6px}.direct-chat-text[_ngcontent-%COMP%]:after{border-width:5px;margin-top:-5px}.direct-chat-text[_ngcontent-%COMP%]:after, .direct-chat-text[_ngcontent-%COMP%]:before{position:absolute;right:100%;top:15px;border:solid transparent;border-right-color:#d2d6de;content:" ";height:0;width:0;pointer-events:none}[_ngcontent-%COMP%]:after, [_ngcontent-%COMP%]:before{box-sizing:border-box}.direct-chat-msg[_ngcontent-%COMP%]:after{clear:both}.direct-chat-msg[_ngcontent-%COMP%]:after{content:" ";display:table}.direct-chat-info[_ngcontent-%COMP%]{display:block;margin-bottom:2px;font-size:12px}.right[_ngcontent-%COMP%]   .direct-chat-img[_ngcontent-%COMP%]{float:right}.direct-chat-warning[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%] > .direct-chat-text[_ngcontent-%COMP%]{background:#f39c12;border-color:#f39c12;color:#fff}.right[_ngcontent-%COMP%]   .direct-chat-text[_ngcontent-%COMP%]{margin-right:50px;margin-left:0}.box-footer[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;border-top:1px solid #f4f4f4;padding:10px;background-color:#fff}.box-header[_ngcontent-%COMP%]:before, .box-body[_ngcontent-%COMP%]:before, .box-footer[_ngcontent-%COMP%]:before, .box-header[_ngcontent-%COMP%]:after, .box-body[_ngcontent-%COMP%]:after, .box-footer[_ngcontent-%COMP%]:after{content:" ";display:table}.input-group-btn[_ngcontent-%COMP%]{position:relative;font-size:0;white-space:nowrap}.input-group-btn[_ngcontent-%COMP%]:last-child > .btn[_ngcontent-%COMP%], .input-group-btn[_ngcontent-%COMP%]:last-child > .btn-group[_ngcontent-%COMP%]{z-index:2;margin-left:-1px}.btn-warning[_ngcontent-%COMP%]{color:#fff;background-color:#f0ad4e;border-color:#eea236}']}),V})()}];let Te=(()=>{class V{}return V.\u0275fac=function(D){return new(D||V)},V.\u0275mod=s.oAB({type:V}),V.\u0275inj=s.cJS({imports:[y.Bz.forChild(be),y.Bz]}),V})();var ee=Z(5938),ve=Z(9549),we=Z(9602),Le=Z(4385),Ue=Z(7392),me=Z(811),ke=Z(7155),Re=Z(4859);let Ne=(()=>{class V{}return V.\u0275fac=function(D){return new(D||V)},V.\u0275mod=s.oAB({type:V}),V.\u0275inj=s.cJS({imports:[K.ez,Te,ee.Is,ve.lN,we.FA,Le.LD,Ue.Ps,me.vV,ke.p0,Re.ot,me.vV,we.FA,Le.LD,ee.Is,ve.lN,H.u5]}),V})()},4672:ze=>{window,ze.exports=function(xe){var Z={};function K(y){if(Z[y])return Z[y].exports;var I=Z[y]={i:y,l:!1,exports:{}};return xe[y].call(I.exports,I,I.exports,K),I.l=!0,I.exports}return K.m=xe,K.c=Z,K.d=function(y,I,de){K.o(y,I)||Object.defineProperty(y,I,{enumerable:!0,get:de})},K.r=function(y){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(y,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(y,"__esModule",{value:!0})},K.t=function(y,I){if(1&I&&(y=K(y)),8&I||4&I&&"object"==typeof y&&y&&y.__esModule)return y;var de=Object.create(null);if(K.r(de),Object.defineProperty(de,"default",{enumerable:!0,value:y}),2&I&&"string"!=typeof y)for(var Y in y)K.d(de,Y,function(s){return y[s]}.bind(null,Y));return de},K.n=function(y){var I=y&&y.__esModule?function(){return y.default}:function(){return y};return K.d(I,"a",I),I},K.o=function(y,I){return Object.prototype.hasOwnProperty.call(y,I)},K.p="",K(K.s=2)}([function(xe,Z,K){"use strict";var F,y=this&&this.__extends||(F=function(_,k){return(F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,re){N.__proto__=re}||function(N,re){for(var ie in re)re.hasOwnProperty(ie)&&(N[ie]=re[ie])})(_,k)},function(_,k){function N(){this.constructor=_}F(_,k),_.prototype=null===k?Object.create(k):(N.prototype=k.prototype,new N)});Object.defineProperty(Z,"__esModule",{value:!0});var I=256,de=function(){function F(_){void 0===_&&(_="="),this._paddingCharacter=_}return F.prototype.encodedLength=function(_){return this._paddingCharacter?(_+2)/3*4|0:(8*_+5)/6|0},F.prototype.encode=function(_){for(var k="",N=0;N<_.length-2;N+=3)k+=this._encodeByte((re=_[N]<<16|_[N+1]<<8|_[N+2])>>>18&63),k+=this._encodeByte(re>>>12&63),k+=this._encodeByte(re>>>6&63),k+=this._encodeByte(re>>>0&63);var re,ie=_.length-N;return ie>0&&(k+=this._encodeByte((re=_[N]<<16|(2===ie?_[N+1]<<8:0))>>>18&63),k+=this._encodeByte(re>>>12&63),k+=2===ie?this._encodeByte(re>>>6&63):this._paddingCharacter||"",k+=this._paddingCharacter||""),k},F.prototype.maxDecodedLength=function(_){return this._paddingCharacter?_/4*3|0:(6*_+7)/8|0},F.prototype.decodedLength=function(_){return this.maxDecodedLength(_.length-this._getPaddingLength(_))},F.prototype.decode=function(_){if(0===_.length)return new Uint8Array(0);for(var k=this._getPaddingLength(_),N=_.length-k,re=new Uint8Array(this.maxDecodedLength(N)),ie=0,fe=0,be=0,Te=0,ee=0,ve=0,we=0;fe<N-4;fe+=4)Te=this._decodeChar(_.charCodeAt(fe+0)),ee=this._decodeChar(_.charCodeAt(fe+1)),ve=this._decodeChar(_.charCodeAt(fe+2)),we=this._decodeChar(_.charCodeAt(fe+3)),re[ie++]=Te<<2|ee>>>4,re[ie++]=ee<<4|ve>>>2,re[ie++]=ve<<6|we,be|=Te&I,be|=ee&I,be|=ve&I,be|=we&I;if(fe<N-1&&(Te=this._decodeChar(_.charCodeAt(fe)),ee=this._decodeChar(_.charCodeAt(fe+1)),re[ie++]=Te<<2|ee>>>4,be|=Te&I,be|=ee&I),fe<N-2&&(ve=this._decodeChar(_.charCodeAt(fe+2)),re[ie++]=ee<<4|ve>>>2,be|=ve&I),fe<N-3&&(we=this._decodeChar(_.charCodeAt(fe+3)),re[ie++]=ve<<6|we,be|=we&I),0!==be)throw new Error("Base64Coder: incorrect characters for decoding");return re},F.prototype._encodeByte=function(_){var k=_;return k+=65,k+=25-_>>>8&6,k+=51-_>>>8&-75,k+=61-_>>>8&-15,k+=62-_>>>8&3,String.fromCharCode(k)},F.prototype._decodeChar=function(_){var k=I;return k+=(42-_&_-44)>>>8&-I+_-43+62,k+=(46-_&_-48)>>>8&-I+_-47+63,k+=(47-_&_-58)>>>8&-I+_-48+52,(k+=(64-_&_-91)>>>8&-I+_-65+0)+((96-_&_-123)>>>8&-I+_-97+26)},F.prototype._getPaddingLength=function(_){var k=0;if(this._paddingCharacter){for(var N=_.length-1;N>=0&&_[N]===this._paddingCharacter;N--)k++;if(_.length<4||k>2)throw new Error("Base64Coder: incorrect padding")}return k},F}();Z.Coder=de;var Y=new de;Z.encode=function s(F){return Y.encode(F)},Z.decode=function $(F){return Y.decode(F)};var ne=function(F){function _(){return null!==F&&F.apply(this,arguments)||this}return y(_,F),_.prototype._encodeByte=function(k){var N=k;return N+=65,N+=25-k>>>8&6,N+=51-k>>>8&-75,N+=61-k>>>8&-13,N+=62-k>>>8&49,String.fromCharCode(N)},_.prototype._decodeChar=function(k){var N=I;return N+=(44-k&k-46)>>>8&-I+k-45+62,N+=(94-k&k-96)>>>8&-I+k-95+63,N+=(47-k&k-58)>>>8&-I+k-48+52,(N+=(64-k&k-91)>>>8&-I+k-65+0)+((96-k&k-123)>>>8&-I+k-97+26)},_}(de);Z.URLSafeCoder=ne;var G=new ne;Z.encodeURLSafe=function H(F){return G.encode(F)},Z.decodeURLSafe=function W(F){return G.decode(F)},Z.encodedLength=function(F){return Y.encodedLength(F)},Z.maxDecodedLength=function(F){return Y.maxDecodedLength(F)},Z.decodedLength=function(F){return Y.decodedLength(F)}},function(xe,Z,K){"use strict";Object.defineProperty(Z,"__esModule",{value:!0});var y="utf8: invalid string",I="utf8: invalid source encoding";function Y($){for(var ne=0,G=0;G<$.length;G++){var H=$.charCodeAt(G);if(H<128)ne+=1;else if(H<2048)ne+=2;else if(H<55296)ne+=3;else{if(!(H<=57343))throw new Error(y);if(G>=$.length-1)throw new Error(y);G++,ne+=4}}return ne}Z.encode=function de($){for(var ne=new Uint8Array(Y($)),G=0,H=0;H<$.length;H++){var W=$.charCodeAt(H);W<128?ne[G++]=W:W<2048?(ne[G++]=192|W>>6,ne[G++]=128|63&W):W<55296?(ne[G++]=224|W>>12,ne[G++]=128|W>>6&63,ne[G++]=128|63&W):(H++,W=(1023&W)<<10,W|=1023&$.charCodeAt(H),ne[G++]=240|(W+=65536)>>18,ne[G++]=128|W>>12&63,ne[G++]=128|W>>6&63,ne[G++]=128|63&W)}return ne},Z.encodedLength=Y,Z.decode=function s($){for(var ne=[],G=0;G<$.length;G++){var H=$[G];if(128&H){var W=void 0;if(H<224){if(G>=$.length)throw new Error(I);if(128!=(192&(F=$[++G])))throw new Error(I);H=(31&H)<<6|63&F,W=128}else if(H<240){if(G>=$.length-1)throw new Error(I);var F=$[++G],_=$[++G];if(128!=(192&F)||128!=(192&_))throw new Error(I);H=(15&H)<<12|(63&F)<<6|63&_,W=2048}else{if(!(H<248))throw new Error(I);if(G>=$.length-2)throw new Error(I);F=$[++G],_=$[++G];var k=$[++G];if(128!=(192&F)||128!=(192&_)||128!=(192&k))throw new Error(I);H=(15&H)<<18|(63&F)<<12|(63&_)<<6|63&k,W=65536}if(H<W||H>=55296&&H<=57343)throw new Error(I);if(H>=65536){if(H>1114111)throw new Error(I);H-=65536,ne.push(String.fromCharCode(55296|H>>10)),H=56320|1023&H}}ne.push(String.fromCharCode(H))}return ne.join("")}},function(xe,Z,K){xe.exports=K(3).default},function(xe,Z,K){"use strict";K.r(Z);var t,y=function(){function t(e,n){this.lastId=0,this.prefix=e,this.name=n}return t.prototype.create=function(e){this.lastId++;var n=this.lastId,r=this.prefix+n,i=this.name+"["+n+"]",a=!1,h=function(){a||(e.apply(null,arguments),a=!0)};return this[n]=h,{number:n,id:r,name:i,callback:h}},t.prototype.remove=function(e){delete this[e.number]},t}(),I=new y("_pusher_script_","Pusher.ScriptReceivers"),Y={VERSION:"8.0.2",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},s=function(){function t(e){this.options=e,this.receivers=e.receivers||I,this.loading={}}return t.prototype.load=function(e,n,r){var i=this;if(i.loading[e]&&i.loading[e].length>0)i.loading[e].push(r);else{i.loading[e]=[r];var a=X.createScriptRequest(i.getPath(e,n)),h=i.receivers.create(function(x){if(i.receivers.remove(h),i.loading[e]){var j=i.loading[e];delete i.loading[e];for(var L=function(he){he||a.cleanup()},Q=0;Q<j.length;Q++)j[Q](x,L)}});a.send(h)}},t.prototype.getRoot=function(e){var r=X.getDocument().location.protocol;return(e&&e.useTLS||"https:"===r?this.options.cdn_https:this.options.cdn_http).replace(/\/*$/,"")+"/"+this.options.version},t.prototype.getPath=function(e,n){return this.getRoot(n)+"/"+e+this.options.suffix+".js"},t}(),$=s,ne=new y("_pusher_dependencies","Pusher.DependenciesReceivers"),G=new $({cdn_http:Y.cdn_http,cdn_https:Y.cdn_https,version:Y.VERSION,suffix:Y.dependency_suffix,receivers:ne}),H={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}},F={buildLogSuffix:function(t){var r,n=H.urls[t];return n?(n.fullUrl?r=n.fullUrl:n.path&&(r=H.baseUrl+n.path),r?"See: "+r:""):""}},_=(()=>{return(t=_||(_={})).UserAuthentication="user-authentication",t.ChannelAuthorization="channel-authorization",_;var t})(),k=(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])})(e,n)},function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),N=function(t){function e(n){var r=this.constructor,i=t.call(this,n)||this;return Object.setPrototypeOf(i,r.prototype),i}return k(e,t),e}(Error),re=function(t){function e(n){var r=this.constructor,i=t.call(this,n)||this;return Object.setPrototypeOf(i,r.prototype),i}return k(e,t),e}(Error),ie=function(t){function e(n){var r=this.constructor,i=t.call(this,n)||this;return Object.setPrototypeOf(i,r.prototype),i}return k(e,t),e}(Error),fe=function(t){function e(n){var r=this.constructor,i=t.call(this,n)||this;return Object.setPrototypeOf(i,r.prototype),i}return k(e,t),e}(Error),be=function(t){function e(n){var r=this.constructor,i=t.call(this,n)||this;return Object.setPrototypeOf(i,r.prototype),i}return k(e,t),e}(Error),Te=function(t){function e(n){var r=this.constructor,i=t.call(this,n)||this;return Object.setPrototypeOf(i,r.prototype),i}return k(e,t),e}(Error),ee=function(t){function e(n){var r=this.constructor,i=t.call(this,n)||this;return Object.setPrototypeOf(i,r.prototype),i}return k(e,t),e}(Error),ve=function(t){function e(n){var r=this.constructor,i=t.call(this,n)||this;return Object.setPrototypeOf(i,r.prototype),i}return k(e,t),e}(Error),we=function(t){function e(n,r){var i=this.constructor,a=t.call(this,r)||this;return a.status=n,Object.setPrototypeOf(a,i.prototype),a}return k(e,t),e}(Error),Ue=function(t,e,n,r,i){var a=X.createXHR();for(var h in a.open("POST",n.endpoint,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.headers)a.setRequestHeader(h,n.headers[h]);if(null!=n.headersProvider){var x=n.headersProvider();for(var h in x)a.setRequestHeader(h,x[h])}return a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status){var j=void 0,L=!1;try{j=JSON.parse(a.responseText),L=!0}catch{i(new we(200,"JSON returned from "+r.toString()+" endpoint was invalid, yet status code was 200. Data was: "+a.responseText),null)}L&&i(null,j)}else{var Q="";switch(r){case _.UserAuthentication:Q=F.buildLogSuffix("authenticationEndpoint");break;case _.ChannelAuthorization:Q="Clients must be authorized to join private or presence channels. "+F.buildLogSuffix("authorizationEndpoint")}i(new we(a.status,"Unable to retrieve auth string from "+r.toString()+" endpoint - received status: "+a.status+" from "+n.endpoint+". "+Q),null)}},a.send(e),a};for(var ke=String.fromCharCode,Re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ne={},V=0,oe=Re.length;V<oe;V++)Ne[Re.charAt(V)]=V;var D=function(t){var e=t.charCodeAt(0);return e<128?t:e<2048?ke(192|e>>>6)+ke(128|63&e):ke(224|e>>>12&15)+ke(128|e>>>6&63)+ke(128|63&e)},ae=function(t){return t.replace(/[^\x00-\x7F]/g,D)},ue=function(t){var e=[0,2,1][t.length%3],n=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[Re.charAt(n>>>18),Re.charAt(n>>>12&63),e>=2?"=":Re.charAt(n>>>6&63),e>=1?"=":Re.charAt(63&n)].join("")},He=window.btoa||function(t){return t.replace(/[\s\S]{1,3}/g,ue)},We=function(){function t(e,n,r,i){var a=this;this.clear=n,this.timer=e(function(){a.timer&&(a.timer=i(a.timer))},r)}return t.prototype.isRunning=function(){return null!==this.timer},t.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},t}(),u=We,o=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function c(t){window.clearTimeout(t)}function p(t){window.clearInterval(t)}var v=function(t){function e(n,r){return t.call(this,setTimeout,c,n,function(i){return r(),null})||this}return o(e,t),e}(u),f=function(t){function e(n,r){return t.call(this,setInterval,p,n,function(i){return r(),i})||this}return o(e,t),e}(u),w={now:function(){return Date.now?Date.now():(new Date).valueOf()},defer:function(t){return new v(0,t)},method:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Array.prototype.slice.call(arguments,1);return function(i){return i[t].apply(i,r.concat(arguments))}}},d=w;function C(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++){var i=e[r];for(var a in i)t[a]=i[a]&&i[a].constructor&&i[a].constructor===Object?C(t[a]||{},i[a]):i[a]}return t}function E(){for(var t=["Pusher"],e=0;e<arguments.length;e++)t.push("string"==typeof arguments[e]?arguments[e]:z(arguments[e]));return t.join(" : ")}function S(t,e){var n=Array.prototype.indexOf;if(null===t)return-1;if(n&&t.indexOf===n)return t.indexOf(e);for(var r=0,i=t.length;r<i;r++)if(t[r]===e)return r;return-1}function R(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(t[n],n,t)}function A(t){var e=[];return R(t,function(n,r){e.push(r)}),e}function m(t,e,n){for(var r=0;r<t.length;r++)e.call(n||window,t[r],r,t)}function B(t,e){for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r,t,n));return n}function T(t,e){e=e||function(i){return!!i};for(var n=[],r=0;r<t.length;r++)e(t[r],r,t,n)&&n.push(t[r]);return n}function b(t,e){var n={};return R(t,function(r,i){(e&&e(r,i,t,n)||Boolean(r))&&(n[i]=r)}),n}function l(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1}function M(t){return function q(t,e){var n={};return R(t,function(r,i){n[i]=e(r)}),n}(t,function(e){return"object"==typeof e&&(e=z(e)),encodeURIComponent(function me(t){return He(ae(t))}(e.toString()))})}function U(t){return B(function O(t){var e=[];return R(t,function(n,r){e.push([r,n])}),e}(M(b(t,function(r){return void 0!==r}))),d.method("join","=")).join("&")}function z(t){try{return JSON.stringify(t)}catch{return JSON.stringify(function te(t){var e=[],n=[];return function r(i,a){var h,x,j;switch(typeof i){case"object":if(!i)return null;for(h=0;h<e.length;h+=1)if(e[h]===i)return{$ref:n[h]};if(e.push(i),n.push(a),"[object Array]"===Object.prototype.toString.apply(i))for(j=[],h=0;h<i.length;h+=1)j[h]=r(i[h],a+"["+h+"]");else for(x in j={},i)Object.prototype.hasOwnProperty.call(i,x)&&(j[x]=r(i[x],a+"["+JSON.stringify(x)+"]"));return j;case"number":case"string":case"boolean":return i}}(t,"$")}(t))}}var pe=function(){function t(){this.globalLog=function(e){window.console&&window.console.log&&window.console.log(e)}}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.log(this.globalLog,e)},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.log(this.globalLogWarn,e)},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.log(this.globalLogError,e)},t.prototype.globalLogWarn=function(e){window.console&&window.console.warn?window.console.warn(e):this.globalLog(e)},t.prototype.globalLogError=function(e){window.console&&window.console.error?window.console.error(e):this.globalLogWarn(e)},t.prototype.log=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=E.apply(this,arguments);St.log?St.log(i):St.logToConsole&&e.bind(this)(i)},t}(),J=new pe,le=function(t,e,n,r,i){(void 0!==n.headers||null!=n.headersProvider)&&J.warn("To send headers with the "+r.toString()+" request, you must use AJAX, rather than JSONP.");var a=t.nextAuthCallbackID.toString();t.nextAuthCallbackID++;var h=t.getDocument(),x=h.createElement("script");t.auth_callbacks[a]=function(Q){i(null,Q)},x.src=n.endpoint+"?callback="+encodeURIComponent("Pusher.auth_callbacks['"+a+"']")+"&"+e;var L=h.getElementsByTagName("head")[0]||h.documentElement;L.insertBefore(x,L.firstChild)},qe=function(){function t(e){this.src=e}return t.prototype.send=function(e){var n=this,r="Error loading "+n.src;n.script=document.createElement("script"),n.script.id=e.id,n.script.src=n.src,n.script.type="text/javascript",n.script.charset="UTF-8",n.script.addEventListener?(n.script.onerror=function(){e.callback(r)},n.script.onload=function(){e.callback(null)}):n.script.onreadystatechange=function(){("loaded"===n.script.readyState||"complete"===n.script.readyState)&&e.callback(null)},void 0===n.script.async&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(n.errorScript=document.createElement("script"),n.errorScript.id=e.id+"_error",n.errorScript.text=e.name+"('"+r+"');",n.script.async=n.errorScript.async=!1):n.script.async=!0;var i=document.getElementsByTagName("head")[0];i.insertBefore(n.script,i.firstChild),n.errorScript&&i.insertBefore(n.errorScript,n.script.nextSibling)},t.prototype.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null},t}(),Pe=qe,ye=function(){function t(e,n){this.url=e,this.data=n}return t.prototype.send=function(e){if(!this.request){var n=U(this.data);this.request=X.createScriptRequest(this.url+"/"+e.number+"?"+n),this.request.send(e)}},t.prototype.cleanup=function(){this.request&&this.request.cleanup()},t}(),Be=ye,_e={name:"jsonp",getAgent:function(t,e){return function(n,r){var h=X.createJSONPRequest("http"+(e?"s":"")+"://"+(t.host||t.options.host)+t.options.path,n),x=X.ScriptReceivers.create(function(j,L){I.remove(x),h.cleanup(),L&&L.host&&(t.host=L.host),r&&r(j,L)});h.send(x)}}};function Ee(t,e,n){return t+(e.useTLS?"s":"")+"://"+(e.useTLS?e.hostTLS:e.hostNonTLS)+n}function Ge(t,e){return"/app/"+t+"?protocol="+Y.PROTOCOL+"&client=js&version="+Y.VERSION+(e?"&"+e:"")}var tt={getInitial:function(t,e){return Ee("ws",e,(e.httpPath||"")+Ge(t,"flash=false"))}},pt={getInitial:function(t,e){return Ee("http",e,(e.httpPath||"/pusher")+Ge(t))}},Ye={getInitial:function(t,e){return Ee("http",e,e.httpPath||"/pusher")},getPath:function(t,e){return Ge(t)}},Ke=function(){function t(){this._callbacks={}}return t.prototype.get=function(e){return this._callbacks[nt(e)]},t.prototype.add=function(e,n,r){var i=nt(e);this._callbacks[i]=this._callbacks[i]||[],this._callbacks[i].push({fn:n,context:r})},t.prototype.remove=function(e,n,r){if(e||n||r){var i=e?[nt(e)]:A(this._callbacks);n||r?this.removeCallback(i,n,r):this.removeAllCallbacks(i)}else this._callbacks={}},t.prototype.removeCallback=function(e,n,r){m(e,function(i){this._callbacks[i]=T(this._callbacks[i]||[],function(a){return n&&n!==a.fn||r&&r!==a.context}),0===this._callbacks[i].length&&delete this._callbacks[i]},this)},t.prototype.removeAllCallbacks=function(e){m(e,function(n){delete this._callbacks[n]},this)},t}(),Qe=Ke;function nt(t){return"_"+t}var rt=function(){function t(e){this.callbacks=new Qe,this.global_callbacks=[],this.failThrough=e}return t.prototype.bind=function(e,n,r){return this.callbacks.add(e,n,r),this},t.prototype.bind_global=function(e){return this.global_callbacks.push(e),this},t.prototype.unbind=function(e,n,r){return this.callbacks.remove(e,n,r),this},t.prototype.unbind_global=function(e){return e?(this.global_callbacks=T(this.global_callbacks||[],function(n){return n!==e}),this):(this.global_callbacks=[],this)},t.prototype.unbind_all=function(){return this.unbind(),this.unbind_global(),this},t.prototype.emit=function(e,n,r){for(var i=0;i<this.global_callbacks.length;i++)this.global_callbacks[i](e,n);var a=this.callbacks.get(e),h=[];if(r?h.push(n,r):n&&h.push(n),a&&a.length>0)for(i=0;i<a.length;i++)a[i].fn.apply(a[i].context||window,h);else this.failThrough&&this.failThrough(e,n);return this},t}(),se=rt,gt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ct=function(t){function e(n,r,i,a,h){var x=t.call(this)||this;return x.initialize=X.transportConnectionInitializer,x.hooks=n,x.name=r,x.priority=i,x.key=a,x.options=h,x.state="new",x.timeline=h.timeline,x.activityTimeout=h.activityTimeout,x.id=x.timeline.generateUniqueID(),x}return gt(e,t),e.prototype.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)},e.prototype.supportsPing=function(){return Boolean(this.hooks.supportsPing)},e.prototype.connect=function(){var n=this;if(this.socket||"initialized"!==this.state)return!1;var r=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(r,this.options)}catch(i){return d.defer(function(){n.onError(i),n.changeState("closed")}),!1}return this.bindListeners(),J.debug("Connecting",{transport:this.name,url:r}),this.changeState("connecting"),!0},e.prototype.close=function(){return!!this.socket&&(this.socket.close(),!0)},e.prototype.send=function(n){var r=this;return"open"===this.state&&(d.defer(function(){r.socket&&r.socket.send(n)}),!0)},e.prototype.ping=function(){"open"===this.state&&this.supportsPing()&&this.socket.ping()},e.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},e.prototype.onError=function(n){this.emit("error",{type:"WebSocketError",error:n}),this.timeline.error(this.buildTimelineMessage({error:n.toString()}))},e.prototype.onClose=function(n){n?this.changeState("closed",{code:n.code,reason:n.reason,wasClean:n.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},e.prototype.onMessage=function(n){this.emit("message",n)},e.prototype.onActivity=function(){this.emit("activity")},e.prototype.bindListeners=function(){var n=this;this.socket.onopen=function(){n.onOpen()},this.socket.onerror=function(r){n.onError(r)},this.socket.onclose=function(r){n.onClose(r)},this.socket.onmessage=function(r){n.onMessage(r)},this.supportsPing()&&(this.socket.onactivity=function(){n.onActivity()})},e.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},e.prototype.changeState=function(n,r){this.state=n,this.timeline.info(this.buildTimelineMessage({state:n,params:r})),this.emit(n,r)},e.prototype.buildTimelineMessage=function(n){return C({cid:this.id},n)},e}(se),vt=ct,it=function(){function t(e){this.hooks=e}return t.prototype.isSupported=function(e){return this.hooks.isSupported(e)},t.prototype.createConnection=function(e,n,r,i){return new vt(this.hooks,e,n,r,i)},t}(),ce=it,Ae=new ce({urls:tt,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(X.getWebSocketAPI())},isSupported:function(){return Boolean(X.getWebSocketAPI())},getSocket:function(t){return X.createWebSocket(t)}}),Ce={urls:pt,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},Se=C({getSocket:function(t){return X.HTTPFactory.createStreamingSocket(t)}},Ce),ge=C({getSocket:function(t){return X.HTTPFactory.createPollingSocket(t)}},Ce),Me={isSupported:function(){return X.isXHRSupported()}},$e={ws:Ae,xhr_streaming:new ce(C({},Se,Me)),xhr_polling:new ce(C({},ge,Me))},mt=new ce({file:"sockjs",urls:Ye,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return void 0!==window.SockJS},getSocket:function(t,e){return new window.SockJS(t,null,{js_path:G.getPath("sockjs",{useTLS:e.useTLS}),ignore_null_origin:e.ignoreNullOrigin})},beforeOpen:function(t,e){t.send(JSON.stringify({path:e}))}}),Rt={isSupported:function(t){return X.isXDRSupported(t.useTLS)}},zt=new ce(C({},Se,Rt)),Ht=new ce(C({},ge,Rt));$e.xdr_streaming=zt,$e.xdr_polling=Ht,$e.sockjs=mt;var Wt=$e,Gt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vt=function(t){function e(){var n=t.call(this)||this,r=n;return void 0!==window.addEventListener&&(window.addEventListener("online",function(){r.emit("online")},!1),window.addEventListener("offline",function(){r.emit("offline")},!1)),n}return Gt(e,t),e.prototype.isOnline=function(){return void 0===window.navigator.onLine||window.navigator.onLine},e}(se),Jt=new Vt,Xt=function(){function t(e,n,r){this.manager=e,this.transport=n,this.minPingDelay=r.minPingDelay,this.maxPingDelay=r.maxPingDelay,this.pingDelay=void 0}return t.prototype.createConnection=function(e,n,r,i){var a=this;i=C({},i,{activityTimeout:this.pingDelay});var h=this.transport.createConnection(e,n,r,i),x=null,j=function(){h.unbind("open",j),h.bind("closed",L),x=d.now()},L=function(Q){if(h.unbind("closed",L),1002===Q.code||1003===Q.code)a.manager.reportDeath();else if(!Q.wasClean&&x){var he=d.now()-x;he<2*a.maxPingDelay&&(a.manager.reportDeath(),a.pingDelay=Math.max(he/2,a.minPingDelay))}};return h.bind("open",j),h},t.prototype.isSupported=function(e){return this.manager.isAlive()&&this.transport.isSupported(e)},t}(),Yt=Xt,kt={decodeMessage:function(t){try{var e=JSON.parse(t.data),n=e.data;if("string"==typeof n)try{n=JSON.parse(e.data)}catch{}var r={event:e.event,channel:e.channel,data:n};return e.user_id&&(r.user_id=e.user_id),r}catch(i){throw{type:"MessageParseError",error:i,data:t.data}}},encodeMessage:function(t){return JSON.stringify(t)},processHandshake:function(t){var e=kt.decodeMessage(t);if("pusher:connection_established"===e.event){if(!e.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:e.data.socket_id,activityTimeout:1e3*e.data.activity_timeout}}if("pusher:error"===e.event)return{action:this.getCloseAction(e.data),error:this.getCloseError(e.data)};throw"Invalid handshake"},getCloseAction:function(t){return t.code<4e3?t.code>=1002&&t.code<=1004?"backoff":null:4e3===t.code?"tls_only":t.code<4100?"refused":t.code<4200?"backoff":t.code<4300?"retry":"refused"},getCloseError:function(t){return 1e3!==t.code&&1001!==t.code?{type:"PusherError",data:{code:t.code,message:t.reason||t.message}}:null}},Ve=kt,Kt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qt=function(t){function e(n,r){var i=t.call(this)||this;return i.id=n,i.transport=r,i.activityTimeout=r.activityTimeout,i.bindListeners(),i}return Kt(e,t),e.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},e.prototype.send=function(n){return this.transport.send(n)},e.prototype.send_event=function(n,r,i){var a={event:n,data:r};return i&&(a.channel=i),J.debug("Event sent",a),this.send(Ve.encodeMessage(a))},e.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},e.prototype.close=function(){this.transport.close()},e.prototype.bindListeners=function(){var n=this,r={message:function(a){var h;try{h=Ve.decodeMessage(a)}catch(x){n.emit("error",{type:"MessageParseError",error:x,data:a.data})}if(void 0!==h){switch(J.debug("Event recd",h),h.event){case"pusher:error":n.emit("error",{type:"PusherError",data:h.data});break;case"pusher:ping":n.emit("ping");break;case"pusher:pong":n.emit("pong")}n.emit("message",h)}},activity:function(){n.emit("activity")},error:function(a){n.emit("error",a)},closed:function(a){i(),a&&a.code&&n.handleCloseEvent(a),n.transport=null,n.emit("closed")}},i=function(){R(r,function(a,h){n.transport.unbind(h,a)})};R(r,function(a,h){n.transport.bind(h,a)})},e.prototype.handleCloseEvent=function(n){var r=Ve.getCloseAction(n),i=Ve.getCloseError(n);i&&this.emit("error",i),r&&this.emit(r,{action:r,error:i})},e}(se),$t=Qt,en=function(){function t(e,n){this.transport=e,this.callback=n,this.bindListeners()}return t.prototype.close=function(){this.unbindListeners(),this.transport.close()},t.prototype.bindListeners=function(){var e=this;this.onMessage=function(n){var r;e.unbindListeners();try{r=Ve.processHandshake(n)}catch(i){return e.finish("error",{error:i}),void e.transport.close()}"connected"===r.action?e.finish("connected",{connection:new $t(r.id,e.transport),activityTimeout:r.activityTimeout}):(e.finish(r.action,{error:r.error}),e.transport.close())},this.onClosed=function(n){e.unbindListeners();var r=Ve.getCloseAction(n)||"backoff",i=Ve.getCloseError(n);e.finish(r,{error:i})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},t.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},t.prototype.finish=function(e,n){this.callback(C({transport:this.transport,action:e},n))},t}(),tn=en,nn=function(){function t(e,n){this.timeline=e,this.options=n||{}}return t.prototype.send=function(e,n){this.timeline.isEmpty()||this.timeline.send(X.TimelineTransport.getAgent(this,e),n)},t}(),rn=nn,on=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),an=function(t){function e(n,r){var i=t.call(this,function(a,h){J.debug("No callbacks on "+n+" for "+a)})||this;return i.name=n,i.pusher=r,i.subscribed=!1,i.subscriptionPending=!1,i.subscriptionCancelled=!1,i}return on(e,t),e.prototype.authorize=function(n,r){return r(null,{auth:""})},e.prototype.trigger=function(n,r){if(0!==n.indexOf("client-"))throw new N("Event '"+n+"' does not start with 'client-'");if(!this.subscribed){var i=F.buildLogSuffix("triggeringClientEvents");J.warn("Client event triggered before channel 'subscription_succeeded' event . "+i)}return this.pusher.send_event(n,r,this.name)},e.prototype.disconnect=function(){this.subscribed=!1,this.subscriptionPending=!1},e.prototype.handleEvent=function(n){var r=n.event,i=n.data;"pusher_internal:subscription_succeeded"===r?this.handleSubscriptionSucceededEvent(n):"pusher_internal:subscription_count"===r?this.handleSubscriptionCountEvent(n):0!==r.indexOf("pusher_internal:")&&this.emit(r,i,{})},e.prototype.handleSubscriptionSucceededEvent=function(n){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",n.data)},e.prototype.handleSubscriptionCountEvent=function(n){n.data.subscription_count&&(this.subscriptionCount=n.data.subscription_count),this.emit("pusher:subscription_count",n.data)},e.prototype.subscribe=function(){var n=this;this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,function(r,i){r?(n.subscriptionPending=!1,J.error(r.toString()),n.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:r.message},r instanceof we?{status:r.status}:{}))):n.pusher.send_event("pusher:subscribe",{auth:i.auth,channel_data:i.channel_data,channel:n.name})}))},e.prototype.unsubscribe=function(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},e.prototype.cancelSubscription=function(){this.subscriptionCancelled=!0},e.prototype.reinstateSubscription=function(){this.subscriptionCancelled=!1},e}(se),bt=an,sn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),cn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return sn(e,t),e.prototype.authorize=function(n,r){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:n},r)},e}(bt),yt=cn,un=function(){function t(){this.reset()}return t.prototype.get=function(e){return Object.prototype.hasOwnProperty.call(this.members,e)?{id:e,info:this.members[e]}:null},t.prototype.each=function(e){var n=this;R(this.members,function(r,i){e(n.get(i))})},t.prototype.setMyID=function(e){this.myID=e},t.prototype.onSubscription=function(e){this.members=e.presence.hash,this.count=e.presence.count,this.me=this.get(this.myID)},t.prototype.addMember=function(e){return null===this.get(e.user_id)&&this.count++,this.members[e.user_id]=e.user_info,this.get(e.user_id)},t.prototype.removeMember=function(e){var n=this.get(e.user_id);return n&&(delete this.members[e.user_id],this.count--),n},t.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},t}(),dn=un,fn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ln=function(t,e,n,r){return new(n||(n=Promise))(function(a,h){function x(Q){try{L(r.next(Q))}catch(he){h(he)}}function j(Q){try{L(r.throw(Q))}catch(he){h(he)}}function L(Q){Q.done?a(Q.value):function i(a){return a instanceof n?a:new n(function(h){h(a)})}(Q.value).then(x,j)}L((r=r.apply(t,e||[])).next())})},hn=function(t,e){var r,i,a,h,n={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return h={next:x(0),throw:x(1),return:x(2)},"function"==typeof Symbol&&(h[Symbol.iterator]=function(){return this}),h;function x(L){return function(Q){return function j(L){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(a=2&L[0]?i.return:L[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,L[1])).done)return a;switch(i=0,a&&(L=[2&L[0],a.value]),L[0]){case 0:case 1:a=L;break;case 4:return n.label++,{value:L[1],done:!1};case 5:n.label++,i=L[1],L=[0];continue;case 7:L=n.ops.pop(),n.trys.pop();continue;default:if(!(a=(a=n.trys).length>0&&a[a.length-1])&&(6===L[0]||2===L[0])){n=0;continue}if(3===L[0]&&(!a||L[1]>a[0]&&L[1]<a[3])){n.label=L[1];break}if(6===L[0]&&n.label<a[1]){n.label=a[1],a=L;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(L);break}a[2]&&n.ops.pop(),n.trys.pop();continue}L=e.call(t,n)}catch(Q){L=[6,Q],i=0}finally{r=a=0}if(5&L[0])throw L[1];return{value:L[0]?L[1]:void 0,done:!0}}([L,Q])}}},pn=function(t){function e(n,r){var i=t.call(this,n,r)||this;return i.members=new dn,i}return fn(e,t),e.prototype.authorize=function(n,r){var i=this;t.prototype.authorize.call(this,n,function(a,h){return ln(i,void 0,void 0,function(){var x,j;return hn(this,function(L){switch(L.label){case 0:return a?[3,3]:null==h.channel_data?[3,1]:(x=JSON.parse(h.channel_data),this.members.setMyID(x.user_id),[3,3]);case 1:return[4,this.pusher.user.signinDonePromise];case 2:if(L.sent(),null==this.pusher.user.user_data)return j=F.buildLogSuffix("authorizationEndpoint"),J.error("Invalid auth response for channel '"+this.name+"', expected 'channel_data' field. "+j+", or the user should be signed in."),r("Invalid auth response"),[2];this.members.setMyID(this.pusher.user.user_data.id),L.label=3;case 3:return r(a,h),[2]}})})})},e.prototype.handleEvent=function(n){var r=n.event;if(0===r.indexOf("pusher_internal:"))this.handleInternalEvent(n);else{var i=n.data,a={};n.user_id&&(a.user_id=n.user_id),this.emit(r,i,a)}},e.prototype.handleInternalEvent=function(n){var i=n.data;switch(n.event){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(n);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(n);break;case"pusher_internal:member_added":var a=this.members.addMember(i);this.emit("pusher:member_added",a);break;case"pusher_internal:member_removed":var h=this.members.removeMember(i);h&&this.emit("pusher:member_removed",h)}},e.prototype.handleSubscriptionSucceededEvent=function(n){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(n.data),this.emit("pusher:subscription_succeeded",this.members))},e.prototype.disconnect=function(){this.members.reset(),t.prototype.disconnect.call(this)},e}(yt),gn=pn,vn=K(1),wt=K(0),mn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bn=function(t){function e(n,r,i){var a=t.call(this,n,r)||this;return a.key=null,a.nacl=i,a}return mn(e,t),e.prototype.authorize=function(n,r){var i=this;t.prototype.authorize.call(this,n,function(a,h){if(a)r(a,h);else{var x=h.shared_secret;x?(i.key=Object(wt.decode)(x),delete h.shared_secret,r(null,h)):r(new Error("No shared_secret key in auth payload for encrypted channel: "+i.name),null)}})},e.prototype.trigger=function(n,r){throw new Te("Client events are not currently supported for encrypted channels")},e.prototype.handleEvent=function(n){var r=n.event,i=n.data;0!==r.indexOf("pusher_internal:")&&0!==r.indexOf("pusher:")?this.handleEncryptedEvent(r,i):t.prototype.handleEvent.call(this,n)},e.prototype.handleEncryptedEvent=function(n,r){var i=this;if(this.key)if(r.ciphertext&&r.nonce){var a=Object(wt.decode)(r.ciphertext);if(a.length<this.nacl.secretbox.overheadLength)J.error("Expected encrypted event ciphertext length to be "+this.nacl.secretbox.overheadLength+", got: "+a.length);else{var h=Object(wt.decode)(r.nonce);if(h.length<this.nacl.secretbox.nonceLength)J.error("Expected encrypted event nonce length to be "+this.nacl.secretbox.nonceLength+", got: "+h.length);else{var x=this.nacl.secretbox.open(a,h,this.key);if(null===x)return J.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),void this.authorize(this.pusher.connection.socket_id,function(j,L){j?J.error("Failed to make a request to the authEndpoint: "+L+". Unable to fetch new key, so dropping encrypted event"):null!==(x=i.nacl.secretbox.open(a,h,i.key))?i.emit(n,i.getDataToEmit(x)):J.error("Failed to decrypt event with new key. Dropping encrypted event")});this.emit(n,this.getDataToEmit(x))}}}else J.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+r);else J.debug("Received encrypted event before key has been retrieved from the authEndpoint")},e.prototype.getDataToEmit=function(n){var r=Object(vn.decode)(n);try{return JSON.parse(r)}catch{return r}},e}(yt),yn=bn,wn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_n=function(t){function e(n,r){var i=t.call(this)||this;i.state="initialized",i.connection=null,i.key=n,i.options=r,i.timeline=i.options.timeline,i.usingTLS=i.options.useTLS,i.errorCallbacks=i.buildErrorCallbacks(),i.connectionCallbacks=i.buildConnectionCallbacks(i.errorCallbacks),i.handshakeCallbacks=i.buildHandshakeCallbacks(i.errorCallbacks);var a=X.getNetwork();return a.bind("online",function(){i.timeline.info({netinfo:"online"}),("connecting"===i.state||"unavailable"===i.state)&&i.retryIn(0)}),a.bind("offline",function(){i.timeline.info({netinfo:"offline"}),i.connection&&i.sendActivityCheck()}),i.updateStrategy(),i}return wn(e,t),e.prototype.connect=function(){if(!this.connection&&!this.runner){if(!this.strategy.isSupported())return void this.updateState("failed");this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}},e.prototype.send=function(n){return!!this.connection&&this.connection.send(n)},e.prototype.send_event=function(n,r,i){return!!this.connection&&this.connection.send_event(n,r,i)},e.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},e.prototype.isUsingTLS=function(){return this.usingTLS},e.prototype.startConnecting=function(){var n=this,r=function(i,a){i?n.runner=n.strategy.connect(0,r):"error"===a.action?(n.emit("error",{type:"HandshakeError",error:a.error}),n.timeline.error({handshakeError:a.error})):(n.abortConnecting(),n.handshakeCallbacks[a.action](a))};this.runner=this.strategy.connect(0,r)},e.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},e.prototype.disconnectInternally=function(){this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection&&this.abandonConnection().close()},e.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})},e.prototype.retryIn=function(n){var r=this;this.timeline.info({action:"retry",delay:n}),n>0&&this.emit("connecting_in",Math.round(n/1e3)),this.retryTimer=new v(n||0,function(){r.disconnectInternally(),r.connect()})},e.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},e.prototype.setUnavailableTimer=function(){var n=this;this.unavailableTimer=new v(this.options.unavailableTimeout,function(){n.updateState("unavailable")})},e.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},e.prototype.sendActivityCheck=function(){var n=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new v(this.options.pongTimeout,function(){n.timeline.error({pong_timed_out:n.options.pongTimeout}),n.retryIn(0)})},e.prototype.resetActivityCheck=function(){var n=this;this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new v(this.activityTimeout,function(){n.sendActivityCheck()}))},e.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},e.prototype.buildConnectionCallbacks=function(n){var r=this;return C({},n,{message:function(i){r.resetActivityCheck(),r.emit("message",i)},ping:function(){r.send_event("pusher:pong",{})},activity:function(){r.resetActivityCheck()},error:function(i){r.emit("error",i)},closed:function(){r.abandonConnection(),r.shouldRetry()&&r.retryIn(1e3)}})},e.prototype.buildHandshakeCallbacks=function(n){var r=this;return C({},n,{connected:function(i){r.activityTimeout=Math.min(r.options.activityTimeout,i.activityTimeout,i.connection.activityTimeout||1/0),r.clearUnavailableTimer(),r.setConnection(i.connection),r.socket_id=r.connection.id,r.updateState("connected",{socket_id:r.socket_id})}})},e.prototype.buildErrorCallbacks=function(){var n=this,r=function(i){return function(a){a.error&&n.emit("error",{type:"WebSocketError",error:a.error}),i(a)}};return{tls_only:r(function(){n.usingTLS=!0,n.updateStrategy(),n.retryIn(0)}),refused:r(function(){n.disconnect()}),backoff:r(function(){n.retryIn(1e3)}),retry:r(function(){n.retryIn(0)})}},e.prototype.setConnection=function(n){for(var r in this.connection=n,this.connectionCallbacks)this.connection.bind(r,this.connectionCallbacks[r]);this.resetActivityCheck()},e.prototype.abandonConnection=function(){if(this.connection){for(var n in this.stopActivityCheck(),this.connectionCallbacks)this.connection.unbind(n,this.connectionCallbacks[n]);var r=this.connection;return this.connection=null,r}},e.prototype.updateState=function(n,r){var i=this.state;if(this.state=n,i!==n){var a=n;"connected"===a&&(a+=" with new socket ID "+r.socket_id),J.debug("State changed",i+" -> "+a),this.timeline.info({state:n,params:r}),this.emit("state_change",{previous:i,current:n}),this.emit(n,r)}},e.prototype.shouldRetry=function(){return"connecting"===this.state||"connected"===this.state},e}(se),Cn=_n,Sn=function(){function t(){this.channels={}}return t.prototype.add=function(e,n){return this.channels[e]||(this.channels[e]=function Tn(t,e){if(0===t.indexOf("private-encrypted-")){if(e.config.nacl)return Fe.createEncryptedChannel(t,e,e.config.nacl);var n="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",r=F.buildLogSuffix("encryptedChannelSupport");throw new Te(n+". "+r)}if(0===t.indexOf("private-"))return Fe.createPrivateChannel(t,e);if(0===t.indexOf("presence-"))return Fe.createPresenceChannel(t,e);if(0===t.indexOf("#"))throw new re('Cannot create a channel with name "'+t+'".');return Fe.createChannel(t,e)}(e,n)),this.channels[e]},t.prototype.all=function(){return function P(t){var e=[];return R(t,function(n){e.push(n)}),e}(this.channels)},t.prototype.find=function(e){return this.channels[e]},t.prototype.remove=function(e){var n=this.channels[e];return delete this.channels[e],n},t.prototype.disconnect=function(){R(this.channels,function(e){e.disconnect()})},t}(),xn=Sn;var Rn={createChannels:function(){return new xn},createConnectionManager:function(t,e){return new Cn(t,e)},createChannel:function(t,e){return new bt(t,e)},createPrivateChannel:function(t,e){return new yt(t,e)},createPresenceChannel:function(t,e){return new gn(t,e)},createEncryptedChannel:function(t,e,n){return new yn(t,e,n)},createTimelineSender:function(t,e){return new rn(t,e)},createHandshake:function(t,e){return new tn(t,e)},createAssistantToTheTransportManager:function(t,e,n){return new Yt(t,e,n)}},Fe=Rn,kn=function(){function t(e){this.options=e||{},this.livesLeft=this.options.lives||1/0}return t.prototype.getAssistant=function(e){return Fe.createAssistantToTheTransportManager(this,e,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},t.prototype.isAlive=function(){return this.livesLeft>0},t.prototype.reportDeath=function(){this.livesLeft-=1},t}(),Pt=kn,Pn=function(){function t(e,n){this.strategies=e,this.loop=Boolean(n.loop),this.failFast=Boolean(n.failFast),this.timeout=n.timeout,this.timeoutLimit=n.timeoutLimit}return t.prototype.isSupported=function(){return l(this.strategies,d.method("isSupported"))},t.prototype.connect=function(e,n){var r=this,i=this.strategies,a=0,h=this.timeout,x=null,j=function(L,Q){Q?n(null,Q):(a+=1,r.loop&&(a%=i.length),a<i.length?(h&&(h*=2,r.timeoutLimit&&(h=Math.min(h,r.timeoutLimit))),x=r.tryStrategy(i[a],e,{timeout:h,failFast:r.failFast},j)):n(!0))};return x=this.tryStrategy(i[a],e,{timeout:h,failFast:this.failFast},j),{abort:function(){x.abort()},forceMinPriority:function(L){e=L,x&&x.forceMinPriority(L)}}},t.prototype.tryStrategy=function(e,n,r,i){var a=null,h=null;return r.timeout>0&&(a=new v(r.timeout,function(){h.abort(),i(!0)})),h=e.connect(n,function(x,j){x&&a&&a.isRunning()&&!r.failFast||(a&&a.ensureAborted(),i(x,j))}),{abort:function(){a&&a.ensureAborted(),h.abort()},forceMinPriority:function(x){h.forceMinPriority(x)}}},t}(),Je=Pn,On=function(){function t(e){this.strategies=e}return t.prototype.isSupported=function(){return l(this.strategies,d.method("isSupported"))},t.prototype.connect=function(e,n){return function An(t,e,n){var r=B(t,function(i,a,h,x){return i.connect(e,n(a,x))});return{abort:function(){m(r,Ln)},forceMinPriority:function(i){m(r,function(a){a.forceMinPriority(i)})}}}(this.strategies,e,function(r,i){return function(a,h){i[r].error=a,a?function Mn(t){return function g(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n,t))return!1;return!0}(t,function(e){return Boolean(e.error)})}(i)&&n(!0):(m(i,function(x){x.forceMinPriority(h.transport.priority)}),n(null,h))}})},t}(),_t=On;function Ln(t){!t.error&&!t.aborted&&(t.abort(),t.aborted=!0)}var Un=function(){function t(e,n,r){this.strategy=e,this.transports=n,this.ttl=r.ttl||18e5,this.usingTLS=r.useTLS,this.timeline=r.timeline}return t.prototype.isSupported=function(){return this.strategy.isSupported()},t.prototype.connect=function(e,n){var r=this.usingTLS,i=function En(t){var e=X.getLocalStorage();if(e)try{var n=e[Ct(t)];if(n)return JSON.parse(n)}catch{Ot(t)}return null}(r),a=[this.strategy];if(i&&i.timestamp+this.ttl>=d.now()){var h=this.transports[i.transport];h&&(this.timeline.info({cached:!0,transport:i.transport,latency:i.latency}),a.push(new Je([h],{timeout:2*i.latency+1e3,failFast:!0})))}var x=d.now(),j=a.pop().connect(e,function L(Q,he){Q?(Ot(r),a.length>0?(x=d.now(),j=a.pop().connect(e,L)):n(Q)):(function In(t,e,n){var r=X.getLocalStorage();if(r)try{r[Ct(t)]=z({timestamp:d.now(),transport:e,latency:n})}catch{}}(r,he.transport.name,d.now()-x),n(null,he))});return{abort:function(){j.abort()},forceMinPriority:function(L){e=L,j&&j.forceMinPriority(L)}}},t}(),Dn=Un;function Ct(t){return"pusherTransport"+(t?"TLS":"NonTLS")}function Ot(t){var e=X.getLocalStorage();if(e)try{delete e[Ct(t)]}catch{}}var Bn=function(){function t(e,n){var r=n.delay;this.strategy=e,this.options={delay:r}}return t.prototype.isSupported=function(){return this.strategy.isSupported()},t.prototype.connect=function(e,n){var i,r=this.strategy,a=new v(this.options.delay,function(){i=r.connect(e,n)});return{abort:function(){a.ensureAborted(),i&&i.abort()},forceMinPriority:function(h){e=h,i&&i.forceMinPriority(h)}}},t}(),dt=Bn,jn=function(){function t(e,n,r){this.test=e,this.trueBranch=n,this.falseBranch=r}return t.prototype.isSupported=function(){return(this.test()?this.trueBranch:this.falseBranch).isSupported()},t.prototype.connect=function(e,n){return(this.test()?this.trueBranch:this.falseBranch).connect(e,n)},t}(),at=jn,Zn=function(){function t(e){this.strategy=e}return t.prototype.isSupported=function(){return this.strategy.isSupported()},t.prototype.connect=function(e,n){var r=this.strategy.connect(e,function(i,a){a&&r.abort(),n(i,a)});return r},t}(),Fn=Zn;function st(t){return function(){return t.isSupported()}}var qn=function(t,e,n){var r={};function i(Nt,Yr,Kr,Qr,$r){var qt=n(t,Nt,Yr,Kr,Qr,$r);return r[Nt]=qt,qt}var Tt,a=Object.assign({},e,{hostNonTLS:t.wsHost+":"+t.wsPort,hostTLS:t.wsHost+":"+t.wssPort,httpPath:t.wsPath}),h=Object.assign({},a,{useTLS:!0}),x=Object.assign({},e,{hostNonTLS:t.httpHost+":"+t.httpPort,hostTLS:t.httpHost+":"+t.httpsPort,httpPath:t.httpPath}),j={loop:!0,timeout:15e3,timeoutLimit:6e4},L=new Pt({lives:2,minPingDelay:1e4,maxPingDelay:t.activityTimeout}),Q=new Pt({lives:2,minPingDelay:1e4,maxPingDelay:t.activityTimeout}),he=i("ws","ws",3,a,L),je=i("wss","ws",3,h,L),Wr=i("sockjs","sockjs",1,x),Et=i("xhr_streaming","xhr_streaming",1,x,Q),Gr=i("xdr_streaming","xdr_streaming",1,x,Q),It=i("xhr_polling","xhr_polling",1,x),Vr=i("xdr_polling","xdr_polling",1,x),Bt=new Je([he],j),Jr=new Je([je],j),Xr=new Je([Wr],j),jt=new Je([new at(st(Et),Et,Gr)],j),Zt=new Je([new at(st(It),It,Vr)],j),Ft=new Je([new at(st(jt),new _t([jt,new dt(Zt,{delay:4e3})]),Zt)],j),xt=new at(st(Ft),Ft,Xr);return Tt=new _t(e.useTLS?[Bt,new dt(xt,{delay:2e3})]:[Bt,new dt(Jr,{delay:2e3}),new dt(xt,{delay:5e3})]),new Dn(new Fn(new at(st(he),Tt,xt)),r,{ttl:18e5,timeline:e.timeline,useTLS:e.useTLS})},Hn={getRequest:function(t){var e=new window.XDomainRequest;return e.ontimeout=function(){t.emit("error",new ie),t.close()},e.onerror=function(n){t.emit("error",n),t.close()},e.onprogress=function(){e.responseText&&e.responseText.length>0&&t.onChunk(200,e.responseText)},e.onload=function(){e.responseText&&e.responseText.length>0&&t.onChunk(200,e.responseText),t.emit("finished",200),t.close()},e},abortRequest:function(t){t.ontimeout=t.onerror=t.onprogress=t.onload=null,t.abort()}},Wn=Hn,Gn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Jn=function(t){function e(n,r,i){var a=t.call(this)||this;return a.hooks=n,a.method=r,a.url=i,a}return Gn(e,t),e.prototype.start=function(n){var r=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){r.close()},X.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(n)},e.prototype.close=function(){this.unloader&&(X.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},e.prototype.onChunk=function(n,r){for(;;){var i=this.advanceBuffer(r);if(!i)break;this.emit("chunk",{status:n,data:i})}this.isBufferTooLong(r)&&this.emit("buffer_too_long")},e.prototype.advanceBuffer=function(n){var r=n.slice(this.position),i=r.indexOf("\n");return-1!==i?(this.position+=i+1,r.slice(0,i)):null},e.prototype.isBufferTooLong=function(n){return this.position===n.length&&n.length>262144},e}(se),Xn=Jn,ft=(()=>(function(t){t[t.CONNECTING=0]="CONNECTING",t[t.OPEN=1]="OPEN",t[t.CLOSED=3]="CLOSED"}(ft||(ft={})),ft))(),Xe=ft,Yn=1,Kn=function(){function t(e,n){this.hooks=e,this.session=Mt(1e3)+"/"+function tr(t){for(var e=[],n=0;n<t;n++)e.push(Mt(32).toString(32));return e.join("")}(8),this.location=function Qn(t){var e=/([^\?]*)\/*(\??.*)/.exec(t);return{base:e[1],queryString:e[2]}}(n),this.readyState=Xe.CONNECTING,this.openStream()}return t.prototype.send=function(e){return this.sendRaw(JSON.stringify([e]))},t.prototype.ping=function(){this.hooks.sendHeartbeat(this)},t.prototype.close=function(e,n){this.onClose(e,n,!0)},t.prototype.sendRaw=function(e){if(this.readyState!==Xe.OPEN)return!1;try{return X.createSocketRequest("POST",At(function $n(t,e){return t.base+"/"+e+"/xhr_send"}(this.location,this.session))).start(e),!0}catch{return!1}},t.prototype.reconnect=function(){this.closeStream(),this.openStream()},t.prototype.onClose=function(e,n,r){this.closeStream(),this.readyState=Xe.CLOSED,this.onclose&&this.onclose({code:e,reason:n,wasClean:r})},t.prototype.onChunk=function(e){var n;if(200===e.status)switch(this.readyState===Xe.OPEN&&this.onActivity(),e.data.slice(0,1)){case"o":n=JSON.parse(e.data.slice(1)||"{}"),this.onOpen(n);break;case"a":n=JSON.parse(e.data.slice(1)||"[]");for(var i=0;i<n.length;i++)this.onEvent(n[i]);break;case"m":n=JSON.parse(e.data.slice(1)||"null"),this.onEvent(n);break;case"h":this.hooks.onHeartbeat(this);break;case"c":n=JSON.parse(e.data.slice(1)||"[]"),this.onClose(n[0],n[1],!0)}},t.prototype.onOpen=function(e){this.readyState===Xe.CONNECTING?(e&&e.hostname&&(this.location.base=function er(t,e){var n=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(t);return n[1]+e+n[3]}(this.location.base,e.hostname)),this.readyState=Xe.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},t.prototype.onEvent=function(e){this.readyState===Xe.OPEN&&this.onmessage&&this.onmessage({data:e})},t.prototype.onActivity=function(){this.onactivity&&this.onactivity()},t.prototype.onError=function(e){this.onerror&&this.onerror(e)},t.prototype.openStream=function(){var e=this;this.stream=X.createSocketRequest("POST",At(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",function(n){e.onChunk(n)}),this.stream.bind("finished",function(n){e.hooks.onFinished(e,n)}),this.stream.bind("buffer_too_long",function(){e.reconnect()});try{this.stream.start()}catch(n){d.defer(function(){e.onError(n),e.onClose(1006,"Could not start streaming",!1)})}},t.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},t}();function At(t){var e=-1===t.indexOf("?")?"?":"&";return t+e+"t="+ +new Date+"&n="+Yn++}function Mt(t){return X.randomInt(t)}var nr=Kn,ir={getReceiveURL:function(t,e){return t.base+"/"+e+"/xhr_streaming"+t.queryString},onHeartbeat:function(t){t.sendRaw("[]")},sendHeartbeat:function(t){t.sendRaw("[]")},onFinished:function(t,e){t.onClose(1006,"Connection interrupted ("+e+")",!1)}},ar={getReceiveURL:function(t,e){return t.base+"/"+e+"/xhr"+t.queryString},onHeartbeat:function(){},sendHeartbeat:function(t){t.sendRaw("[]")},onFinished:function(t,e){200===e?t.reconnect():t.onClose(1006,"Connection interrupted ("+e+")",!1)}},sr={getRequest:function(t){var n=new(X.getXHRAPI());return n.onreadystatechange=n.onprogress=function(){switch(n.readyState){case 3:n.responseText&&n.responseText.length>0&&t.onChunk(n.status,n.responseText);break;case 4:n.responseText&&n.responseText.length>0&&t.onChunk(n.status,n.responseText),t.emit("finished",n.status),t.close()}},n},abortRequest:function(t){t.onreadystatechange=null,t.abort()}},cr=sr,ur={createStreamingSocket:function(t){return this.createSocket(ir,t)},createPollingSocket:function(t){return this.createSocket(ar,t)},createSocket:function(t,e){return new nr(t,e)},createXHR:function(t,e){return this.createRequest(cr,t,e)},createRequest:function(t,e,n){return new Xn(t,e,n)}},Lt=ur;Lt.createXDR=function(t,e){return this.createRequest(Wn,t,e)};var fr={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:I,DependenciesReceivers:ne,getDefaultStrategy:qn,Transports:Wt,transportConnectionInitializer:function(){var t=this;t.timeline.info(t.buildTimelineMessage({transport:t.name+(t.options.useTLS?"s":"")})),t.hooks.isInitialized()?t.changeState("initialized"):t.hooks.file?(t.changeState("initializing"),G.load(t.hooks.file,{useTLS:t.options.useTLS},function(e,n){t.hooks.isInitialized()?(t.changeState("initialized"),n(!0)):(e&&t.onError(e),t.onClose(),n(!1))})):t.onClose()},HTTPFactory:Lt,TimelineTransport:_e,getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||window.MozWebSocket},setup:function(t){var e=this;window.Pusher=t;var n=function(){e.onDocumentBody(t.ready)};window.JSON?n():G.load("json2",{},n)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getAuthorizers:function(){return{ajax:Ue,jsonp:le}},onDocumentBody:function(t){var e=this;document.body?t():setTimeout(function(){e.onDocumentBody(t)},0)},createJSONPRequest:function(t,e){return new Be(t,e)},createScriptRequest:function(t){return new Pe(t)},getLocalStorage:function(){try{return window.localStorage}catch{return}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){return new(this.getXHRAPI())},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return Jt},createWebSocket:function(t){return new(this.getWebSocketAPI())(t)},createSocketRequest:function(t,e){if(this.isXHRSupported())return this.HTTPFactory.createXHR(t,e);if(this.isXDRSupported(0===e.indexOf("https:")))return this.HTTPFactory.createXDR(t,e);throw"Cross-origin HTTP requests are not supported"},isXHRSupported:function(){var t=this.getXHRAPI();return Boolean(t)&&void 0!==(new t).withCredentials},isXDRSupported:function(t){var e=t?"https:":"http:",n=this.getProtocol();return Boolean(window.XDomainRequest)&&n===e},addUnloadListener:function(t){void 0!==window.addEventListener?window.addEventListener("unload",t,!1):void 0!==window.attachEvent&&window.attachEvent("onunload",t)},removeUnloadListener:function(t){void 0!==window.addEventListener?window.removeEventListener("unload",t,!1):void 0!==window.detachEvent&&window.detachEvent("onunload",t)},randomInt:function(t){return Math.floor((window.crypto||window.msCrypto).getRandomValues(new Uint32Array(1))[0]/Math.pow(2,32)*t)}},X=fr,lt=(()=>(function(t){t[t.ERROR=3]="ERROR",t[t.INFO=6]="INFO",t[t.DEBUG=7]="DEBUG"}(lt||(lt={})),lt))(),ht=lt,lr=function(){function t(e,n,r){this.key=e,this.session=n,this.events=[],this.options=r||{},this.sent=0,this.uniqueID=0}return t.prototype.log=function(e,n){e<=this.options.level&&(this.events.push(C({},n,{timestamp:d.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},t.prototype.error=function(e){this.log(ht.ERROR,e)},t.prototype.info=function(e){this.log(ht.INFO,e)},t.prototype.debug=function(e){this.log(ht.DEBUG,e)},t.prototype.isEmpty=function(){return 0===this.events.length},t.prototype.send=function(e,n){var r=this,i=C({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],e(i,function(a,h){a||r.sent++,n&&n(a,h)}),!0},t.prototype.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},t}(),hr=lr,pr=function(){function t(e,n,r,i){this.name=e,this.priority=n,this.transport=r,this.options=i||{}}return t.prototype.isSupported=function(){return this.transport.isSupported({useTLS:this.options.useTLS})},t.prototype.connect=function(e,n){var r=this;if(!this.isSupported())return Ut(new ve,n);if(this.priority<e)return Ut(new fe,n);var i=!1,a=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),h=null,x=function(){a.unbind("initialized",x),a.connect()},j=function(){h=Fe.createHandshake(a,function(je){i=!0,he(),n(null,je)})},L=function(je){he(),n(je)},Q=function(){var je;he(),je=z(a),n(new be(je))},he=function(){a.unbind("initialized",x),a.unbind("open",j),a.unbind("error",L),a.unbind("closed",Q)};return a.bind("initialized",x),a.bind("open",j),a.bind("error",L),a.bind("closed",Q),a.initialize(),{abort:function(){i||(he(),h?h.close():a.close())},forceMinPriority:function(je){i||r.priority<je&&(h?h.close():a.close())}}},t}(),gr=pr;function Ut(t,e){return d.defer(function(){e(t)}),{abort:function(){},forceMinPriority:function(){}}}var vr=X.Transports,mr=function(t,e,n,r,i,a){var j,h=vr[n];if(!h)throw new ee(n);return t.enabledTransports&&-1===S(t.enabledTransports,e)||t.disabledTransports&&-1!==S(t.disabledTransports,e)?j=br:(i=Object.assign({ignoreNullOrigin:t.ignoreNullOrigin},i),j=new gr(e,r,a?a.getAssistant(h):h,i)),j},br={isSupported:function(){return!1},connect:function(t,e){var n=d.defer(function(){e(new ve)});return{abort:function(){n.ensureAborted()},forceMinPriority:function(){}}}};var Cr=function(t){if(typeof X.getAuthorizers()[t.transport]>"u")throw"'"+t.transport+"' is not a recognized auth transport";return function(e,n){var r=function(t,e){var n="socket_id="+encodeURIComponent(t.socketId);for(var r in e.params)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(e.params[r]);if(null!=e.paramsProvider){var i=e.paramsProvider();for(var r in i)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(i[r])}return n}(e,t);X.getAuthorizers()[t.transport](X,r,t,_.UserAuthentication,n)}},Tr=function(t){if(typeof X.getAuthorizers()[t.transport]>"u")throw"'"+t.transport+"' is not a recognized auth transport";return function(e,n){var r=function(t,e){var n="socket_id="+encodeURIComponent(t.socketId);for(var r in n+="&channel_name="+encodeURIComponent(t.channelName),e.params)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(e.params[r]);if(null!=e.paramsProvider){var i=e.paramsProvider();for(var r in i)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(i[r])}return n}(e,t);X.getAuthorizers()[t.transport](X,r,t,_.ChannelAuthorization,n)}},Rr=function(t,e,n){var r={authTransport:e.transport,authEndpoint:e.endpoint,auth:{params:e.params,headers:e.headers}};return function(i,a){var h=t.channel(i.channelName);n(h,r).authorize(i.socketId,a)}},et=function(){return et=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},et.apply(this,arguments)};function Pr(t){return t.httpHost?t.httpHost:t.cluster?"sockjs-"+t.cluster+".pusher.com":Y.httpHost}function Or(t){return t.wsHost?t.wsHost:function Ar(t){return"ws-"+t+".pusher.com"}(t.cluster)}function Mr(t){return"https:"===X.getProtocol()||!1!==t.forceTLS}function Lr(t){return"enableStats"in t?t.enableStats:"disableStats"in t&&!t.disableStats}function Ur(t){var e=et(et({},Y.userAuthentication),t.userAuthentication);return"customHandler"in e&&null!=e.customHandler?e.customHandler:Cr(e)}function Er(t,e){var n=function Dr(t,e){var n;return"channelAuthorization"in t?n=et(et({},Y.channelAuthorization),t.channelAuthorization):(n={transport:t.authTransport||Y.authTransport,endpoint:t.authEndpoint||Y.authEndpoint},"auth"in t&&("params"in t.auth&&(n.params=t.auth.params),"headers"in t.auth&&(n.headers=t.auth.headers)),"authorizer"in t&&(n.customHandler=Rr(e,n,t.authorizer))),n}(t,e);return"customHandler"in n&&null!=n.customHandler?n.customHandler:Tr(n)}var Ir=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Br=function(t){function e(n){var r=t.call(this,function(i,a){J.debug("No callbacks on watchlist events for "+i)})||this;return r.pusher=n,r.bindWatchlistInternalEvent(),r}return Ir(e,t),e.prototype.handleEvent=function(n){var r=this;n.data.events.forEach(function(i){r.emit(i.name,i)})},e.prototype.bindWatchlistInternalEvent=function(){var n=this;this.pusher.connection.bind("message",function(r){"pusher_internal:watchlist_events"===r.event&&n.handleEvent(r)})},e}(se),jr=Br;var Fr=function Zr(){var t,e;return{promise:new Promise(function(r,i){t=r,e=i}),resolve:t,reject:e}},Nr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qr=function(t){function e(n){var r=t.call(this,function(i,a){J.debug("No callbacks on user for "+i)})||this;return r.signin_requested=!1,r.user_data=null,r.serverToUserChannel=null,r.signinDonePromise=null,r._signinDoneResolve=null,r._onAuthorize=function(i,a){if(i)return J.warn("Error during signin: "+i),void r._cleanup();r.pusher.send_event("pusher:signin",{auth:a.auth,user_data:a.user_data})},r.pusher=n,r.pusher.connection.bind("state_change",function(i){var a=i.previous,h=i.current;"connected"!==a&&"connected"===h&&r._signin(),"connected"===a&&"connected"!==h&&(r._cleanup(),r._newSigninPromiseIfNeeded())}),r.watchlist=new jr(n),r.pusher.connection.bind("message",function(i){"pusher:signin_success"===i.event&&r._onSigninSuccess(i.data),r.serverToUserChannel&&r.serverToUserChannel.name===i.channel&&r.serverToUserChannel.handleEvent(i)}),r}return Nr(e,t),e.prototype.signin=function(){this.signin_requested||(this.signin_requested=!0,this._signin())},e.prototype._signin=function(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),"connected"===this.pusher.connection.state&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))},e.prototype._onSigninSuccess=function(n){try{this.user_data=JSON.parse(n.user_data)}catch{return J.error("Failed parsing user data after signin: "+n.user_data),void this._cleanup()}if("string"!=typeof this.user_data.id||""===this.user_data.id)return J.error("user_data doesn't contain an id. user_data: "+this.user_data),void this._cleanup();this._signinDoneResolve(),this._subscribeChannels()},e.prototype._subscribeChannels=function(){var i,n=this;this.serverToUserChannel=new bt("#server-to-user-"+this.user_data.id,this.pusher),this.serverToUserChannel.bind_global(function(i,a){0===i.indexOf("pusher_internal:")||0===i.indexOf("pusher:")||n.emit(i,a)}),(i=this.serverToUserChannel).subscriptionPending&&i.subscriptionCancelled?i.reinstateSubscription():!i.subscriptionPending&&"connected"===n.pusher.connection.state&&i.subscribe()},e.prototype._cleanup=function(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()},e.prototype._newSigninPromiseIfNeeded=function(){if(this.signin_requested&&(!this.signinDonePromise||this.signinDonePromise.done)){var n=Fr(),r=n.promise,i=n.resolve;r.done=!1;var h=function(){r.done=!0};r.then(h).catch(h),this.signinDonePromise=r,this._signinDoneResolve=i}},e}(se),zr=qr,Dt=function(){function t(e,n){var r=this;(function Hr(t){if(null==t)throw"You must pass your app key when you instantiate Pusher."})(e),function yr(t){if(null==t)throw"You must pass an options object";if(null==t.cluster)throw"Options object must provide a cluster";"disableStats"in t&&J.warn("The disableStats option is deprecated in favor of enableStats")}(n),this.key=e,this.config=function kr(t,e){var n={activityTimeout:t.activityTimeout||Y.activityTimeout,cluster:t.cluster,httpPath:t.httpPath||Y.httpPath,httpPort:t.httpPort||Y.httpPort,httpsPort:t.httpsPort||Y.httpsPort,pongTimeout:t.pongTimeout||Y.pongTimeout,statsHost:t.statsHost||Y.stats_host,unavailableTimeout:t.unavailableTimeout||Y.unavailableTimeout,wsPath:t.wsPath||Y.wsPath,wsPort:t.wsPort||Y.wsPort,wssPort:t.wssPort||Y.wssPort,enableStats:Lr(t),httpHost:Pr(t),useTLS:Mr(t),wsHost:Or(t),userAuthenticator:Ur(t),channelAuthorizer:Er(t,e)};return"disabledTransports"in t&&(n.disabledTransports=t.disabledTransports),"enabledTransports"in t&&(n.enabledTransports=t.enabledTransports),"ignoreNullOrigin"in t&&(n.ignoreNullOrigin=t.ignoreNullOrigin),"timelineParams"in t&&(n.timelineParams=t.timelineParams),"nacl"in t&&(n.nacl=t.nacl),n}(n,this),this.channels=Fe.createChannels(),this.global_emitter=new se,this.sessionID=X.randomInt(1e9),this.timeline=new hr(this.key,this.sessionID,{cluster:this.config.cluster,features:t.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:ht.INFO,version:Y.VERSION}),this.config.enableStats&&(this.timelineSender=Fe.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+X.TimelineTransport.name})),this.connection=Fe.createConnectionManager(this.key,{getStrategy:function(a){return X.getDefaultStrategy(r.config,a,mr)},timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:Boolean(this.config.useTLS)}),this.connection.bind("connected",function(){r.subscribeAll(),r.timelineSender&&r.timelineSender.send(r.connection.isUsingTLS())}),this.connection.bind("message",function(a){var x=0===a.event.indexOf("pusher_internal:");if(a.channel){var j=r.channel(a.channel);j&&j.handleEvent(a)}x||r.global_emitter.emit(a.event,a.data)}),this.connection.bind("connecting",function(){r.channels.disconnect()}),this.connection.bind("disconnected",function(){r.channels.disconnect()}),this.connection.bind("error",function(a){J.warn(a)}),t.instances.push(this),this.timeline.info({instances:t.instances.length}),this.user=new zr(this),t.isReady&&this.connect()}return t.ready=function(){t.isReady=!0;for(var e=0,n=t.instances.length;e<n;e++)t.instances[e].connect()},t.getClientFeatures=function(){return A(b({ws:X.Transports.ws},function(e){return e.isSupported({})}))},t.prototype.channel=function(e){return this.channels.find(e)},t.prototype.allChannels=function(){return this.channels.all()},t.prototype.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var e=this.connection.isUsingTLS(),n=this.timelineSender;this.timelineSenderTimer=new f(6e4,function(){n.send(e)})}},t.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},t.prototype.bind=function(e,n,r){return this.global_emitter.bind(e,n,r),this},t.prototype.unbind=function(e,n,r){return this.global_emitter.unbind(e,n,r),this},t.prototype.bind_global=function(e){return this.global_emitter.bind_global(e),this},t.prototype.unbind_global=function(e){return this.global_emitter.unbind_global(e),this},t.prototype.unbind_all=function(e){return this.global_emitter.unbind_all(),this},t.prototype.subscribeAll=function(){var e;for(e in this.channels.channels)this.channels.channels.hasOwnProperty(e)&&this.subscribe(e)},t.prototype.subscribe=function(e){var n=this.channels.add(e,this);return n.subscriptionPending&&n.subscriptionCancelled?n.reinstateSubscription():!n.subscriptionPending&&"connected"===this.connection.state&&n.subscribe(),n},t.prototype.unsubscribe=function(e){var n=this.channels.find(e);n&&n.subscriptionPending?n.cancelSubscription():(n=this.channels.remove(e))&&n.subscribed&&n.unsubscribe()},t.prototype.send_event=function(e,n,r){return this.connection.send_event(e,n,r)},t.prototype.shouldUseTLS=function(){return this.config.useTLS},t.prototype.signin=function(){this.user.signin()},t.instances=[],t.isReady=!1,t.logToConsole=!1,t.Runtime=X,t.ScriptReceivers=X.ScriptReceivers,t.DependenciesReceivers=X.DependenciesReceivers,t.auth_callbacks=X.auth_callbacks,t}(),St=Z.default=Dt;X.setup(Dt)}])},5108:(ze,xe)=>{"use strict";var K,u;function y(u,o){if(!u)throw"First parameter is required.";o=new I(u,o=o||{type:"video"});var c=this;function v(T){T&&(o.initCallback=function(){T(),T=o.initCallback=null});var b=new de(u,o);(m=new b(u,o)).record(),R("recording"),o.disableLogs||console.log("Initialized recorderType:",m.constructor.name,"for output-type:",o.type)}function f(T){if(T=T||function(){},m){if("paused"===c.state)return c.resumeRecording(),void setTimeout(function(){f(T)},1);"recording"!==c.state&&!o.disableLogs&&console.warn('Recording state should be: "recording", however current state is: ',c.state),o.disableLogs||console.log("Stopped recording "+o.type+" stream."),"gif"!==o.type?m.stop(b):(m.stop(),b()),R("stopped")}else P();function b(O){if(m){Object.keys(m).forEach(function(M){"function"!=typeof m[M]&&(c[M]=m[M])});var l=m.blob;if(!l){if(!O)throw"Recording failed.";m.blob=l=O}if(l&&!o.disableLogs&&console.log(l.type,"->",fe(l.size)),T){var g;try{g=W.createObjectURL(l)}catch{}"function"==typeof T.call?T.call(c,g):T(g)}o.autoWriteToDisk&&E(function(M){var U={};U[o.type+"Blob"]=M,oe.Store(U)})}else"function"==typeof T.call?T.call(c,""):T("")}}function C(T){postMessage((new FileReaderSync).readAsDataURL(T))}function E(T,b){if(!T)throw"Pass a callback function over getDataURL.";var O=b?b.blob:(m||{}).blob;if(!O)return o.disableLogs||console.warn("Blob encoder did not finish its job yet."),void setTimeout(function(){E(T,b)},1e3);if(typeof Worker<"u"&&!navigator.mozGetUserMedia){var l=function M(U){try{var te=W.createObjectURL(new Blob([U.toString(),"this.onmessage =  function (eee) {"+U.name+"(eee.data);}"],{type:"application/javascript"})),z=new Worker(te);return W.revokeObjectURL(te),z}catch{}}(C);l.onmessage=function(U){T(U.data)},l.postMessage(O)}else{var g=new FileReader;g.readAsDataURL(O),g.onload=function(U){T(U.target.result)}}}function S(T){if(T=T||0,"paused"!==c.state){if("stopped"!==c.state){if(T>=c.recordingDuration)return void f(c.onRecordingStopped);T+=1e3,setTimeout(function(){S(T)},1e3)}}else setTimeout(function(){S(T)},1e3)}function R(T){c&&(c.state=T,"function"==typeof c.onStateChanged.call?c.onStateChanged.call(c,T):c.onStateChanged(T))}var A='It seems that recorder is destroyed or "startRecording" is not invoked for '+o.type+" recorder.";function P(){!0!==o.disableLogs&&console.warn(A)}var m,B={startRecording:function p(T){return o.disableLogs||console.log("RecordRTC version: ",c.version),T&&(o=new I(u,T)),o.disableLogs||console.log("started recording "+o.type+" stream."),m?(m.clearRecordedData(),m.record(),R("recording"),c.recordingDuration&&S(),c):(v(function(){c.recordingDuration&&S()}),c)},stopRecording:f,pauseRecording:function w(){m?"recording"===c.state?(R("paused"),m.pause(),o.disableLogs||console.log("Paused recording.")):o.disableLogs||console.warn("Unable to pause the recording. Recording state: ",c.state):P()},resumeRecording:function d(){m?"paused"===c.state?(R("recording"),m.resume(),o.disableLogs||console.log("Resumed recording.")):o.disableLogs||console.warn("Unable to resume the recording. Recording state: ",c.state):P()},initRecorder:v,setRecordingDuration:function(T,b){if(typeof T>"u")throw"recordingDuration is required.";if("number"!=typeof T)throw"recordingDuration must be a number.";return c.recordingDuration=T,c.onRecordingStopped=b||function(){},{onRecordingStopped:function(O){c.onRecordingStopped=O}}},clearRecordedData:function(){m?(m.clearRecordedData(),o.disableLogs||console.log("Cleared old recorded data.")):P()},getBlob:function(){if(m)return m.blob;P()},getDataURL:E,toURL:function(){if(m)return W.createObjectURL(m.blob);P()},getInternalRecorder:function(){return m},save:function(T){m?be(m.blob,T):P()},getFromDisk:function(T){m?y.getFromDisk(o.type,T):P()},setAdvertisementArray:function(T){o.advertisement=[];for(var b=T.length,O=0;O<b;O++)o.advertisement.push({duration:O,image:T[O]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,reset:function(){"recording"===c.state&&!o.disableLogs&&console.warn("Stop an active recorder."),m&&"function"==typeof m.clearRecordedData&&m.clearRecordedData(),m=null,R("inactive"),c.blob=null},onStateChanged:function(T){o.disableLogs||console.log("Recorder state changed:",T)},state:"inactive",getState:function(){return c.state},destroy:function(){var T=o.disableLogs;o={disableLogs:!0},c.reset(),R("destroyed"),B=c=null,Le.AudioContextConstructor&&(Le.AudioContextConstructor.close(),Le.AudioContextConstructor=null),o.disableLogs=T,o.disableLogs||console.log("RecordRTC is destroyed.")},version:"5.6.2"};if(!this)return c=B,B;for(var q in B)this[q]=B[q];return c=this,B}function I(u,o){return!o.recorderType&&!o.type&&(o.audio&&o.video?o.type="video":o.audio&&!o.video&&(o.type="audio")),o.recorderType&&!o.type&&(o.recorderType===Ne||o.recorderType===Re||o.recorderType===We?o.type="video":o.recorderType===D?o.type="gif":o.recorderType===ke?o.type="audio":o.recorderType===me&&(ee(u,"audio").length&&ee(u,"video").length||!ee(u,"audio").length&&ee(u,"video").length?o.type="video":ee(u,"audio").length&&!ee(u,"video").length&&(o.type="audio"))),typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&(o.mimeType||(o.mimeType="video/webm"),o.type||(o.type=o.mimeType.split("/")[0])),o.type||(o.mimeType&&(o.type=o.mimeType.split("/")[0]),o.type||(o.type="audio")),o}function de(u,o){var c;return(N||F||_)&&(c=ke),typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&!N&&(c=me),"video"===o.type&&(N||_)&&(c=Ne,typeof ReadableStream<"u"&&(c=We)),"gif"===o.type&&(c=D),"canvas"===o.type&&(c=Re),Ue()&&c!==Re&&c!==D&&typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&(ee(u,"video").length||ee(u,"audio").length)&&("audio"===o.type?"function"==typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("audio/webm")&&(c=me):"function"==typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("video/webm")&&(c=me)),u instanceof Array&&u.length&&(c=ue),o.recorderType&&(c=o.recorderType),!o.disableLogs&&c&&c.name&&console.log("Using recorderType:",c.name||c.constructor.name),!c&&re&&(c=me),c}function Y(u){this.addStream=function(o){o&&(u=o)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var c,o=this.mediaType,p=this.mimeType||{audio:null,video:null,gif:null};if("function"!=typeof o.audio&&Ue()&&!ee(u,"audio").length&&(o.audio=!1),"function"!=typeof o.video&&Ue()&&!ee(u,"video").length&&(o.video=!1),"function"!=typeof o.gif&&Ue()&&!ee(u,"video").length&&(o.gif=!1),!o.audio&&!o.video&&!o.gif)throw"MediaStream must have either audio or video tracks.";if(o.audio&&(c=null,"function"==typeof o.audio&&(c=o.audio),this.audioRecorder=new y(u,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:c,mimeType:p.audio,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp}),o.video||this.audioRecorder.startRecording()),o.video){c=null,"function"==typeof o.video&&(c=o.video);var v=u;if(Ue()&&o.audio&&"function"==typeof o.audio){var f=ee(u,"video")[0];k?((v=new ie).addTrack(f),c&&c===Ne&&(c=me)):(v=new ie).addTrack(f)}this.videoRecorder=new y(v,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:c,mimeType:p.video,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp,workerPath:this.workerPath,webAssemblyPath:this.webAssemblyPath,frameRate:this.frameRate,bitrate:this.bitrate}),o.audio||this.videoRecorder.startRecording()}if(o.audio&&o.video){var w=this,d=!0===Ue();(o.audio instanceof ke&&o.video||!0!==o.audio&&!0!==o.video&&o.audio!==o.video)&&(d=!1),!0===d?(w.audioRecorder=null,w.videoRecorder.startRecording()):w.videoRecorder.initRecorder(function(){w.audioRecorder.initRecorder(function(){w.videoRecorder.startRecording(),w.audioRecorder.startRecording()})})}o.gif&&(c=null,"function"==typeof o.gif&&(c=o.gif),this.gifRecorder=new y(u,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:c,mimeType:p.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(o){o=o||function(){},this.audioRecorder&&this.audioRecorder.stopRecording(function(c){o(c,"audio")}),this.videoRecorder&&this.videoRecorder.stopRecording(function(c){o(c,"video")}),this.gifRecorder&&this.gifRecorder.stopRecording(function(c){o(c,"gif")})},this.pauseRecording=function(){this.audioRecorder&&this.audioRecorder.pauseRecording(),this.videoRecorder&&this.videoRecorder.pauseRecording(),this.gifRecorder&&this.gifRecorder.pauseRecording()},this.resumeRecording=function(){this.audioRecorder&&this.audioRecorder.resumeRecording(),this.videoRecorder&&this.videoRecorder.resumeRecording(),this.gifRecorder&&this.gifRecorder.resumeRecording()},this.getBlob=function(o){var c={};return this.audioRecorder&&(c.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(c.video=this.videoRecorder.getBlob()),this.gifRecorder&&(c.gif=this.gifRecorder.getBlob()),o&&o(c),c},this.destroy=function(){this.audioRecorder&&(this.audioRecorder.destroy(),this.audioRecorder=null),this.videoRecorder&&(this.videoRecorder.destroy(),this.videoRecorder=null),this.gifRecorder&&(this.gifRecorder.destroy(),this.gifRecorder=null)},this.getDataURL=function(o){function c(v,f){if(typeof Worker<"u"){var w=function p(v){var d,f=W.createObjectURL(new Blob([v.toString(),"this.onmessage =  function (eee) {"+v.name+"(eee.data);}"],{type:"application/javascript"})),w=new Worker(f);if(typeof W<"u")d=W;else{if(!(typeof webkitURL<"u"))throw"Neither URL nor webkitURL detected.";d=webkitURL}return d.revokeObjectURL(f),w}(function(E){postMessage((new FileReaderSync).readAsDataURL(E))});w.onmessage=function(C){f(C.data)},w.postMessage(v)}else{var d=new FileReader;d.readAsDataURL(v),d.onload=function(C){f(C.target.result)}}}this.getBlob(function(v){v.audio&&v.video?c(v.audio,function(f){c(v.video,function(w){o({audio:f,video:w})})}):v.audio?c(v.audio,function(f){o({audio:f})}):v.video&&c(v.video,function(f){o({video:f})})})},this.writeToDisk=function(){y.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(o){(o=o||{audio:!0,video:!0,gif:!0}).audio&&this.audioRecorder&&this.audioRecorder.save("string"==typeof o.audio?o.audio:""),o.video&&this.videoRecorder&&this.videoRecorder.save("string"==typeof o.video?o.video:""),o.gif&&this.gifRecorder&&this.gifRecorder.save("string"==typeof o.gif?o.gif:"")}}y.version="5.6.2",ze.exports=y,void 0!==(K=function(){return y}.apply(xe,[]))&&(ze.exports=K),y.getFromDisk=function(u,o){if(!o)throw"callback is mandatory.";console.log("Getting recorded "+("all"===u?"blobs":u+" blob ")+" from disk!"),oe.Fetch(function(c,p){"all"!==u&&p===u+"Blob"&&o&&o(c),"all"===u&&o&&o(c,p.replace("Blob",""))})},y.writeToDisk=function(u){console.log("Writing recorded blob(s) to disk!"),(u=u||{}).audio&&u.video&&u.gif?u.audio.getDataURL(function(o){u.video.getDataURL(function(c){u.gif.getDataURL(function(p){oe.Store({audioBlob:o,videoBlob:c,gifBlob:p})})})}):u.audio&&u.video?u.audio.getDataURL(function(o){u.video.getDataURL(function(c){oe.Store({audioBlob:o,videoBlob:c})})}):u.audio&&u.gif?u.audio.getDataURL(function(o){u.gif.getDataURL(function(c){oe.Store({audioBlob:o,gifBlob:c})})}):u.video&&u.gif?u.video.getDataURL(function(o){u.gif.getDataURL(function(c){oe.Store({videoBlob:o,gifBlob:c})})}):u.audio?u.audio.getDataURL(function(o){oe.Store({audioBlob:o})}):u.video?u.video.getDataURL(function(o){oe.Store({videoBlob:o})}):u.gif&&u.gif.getDataURL(function(o){oe.Store({gifBlob:o})})},Y.getFromDisk=y.getFromDisk,Y.writeToDisk=y.writeToDisk,y.MRecordRTC=Y,(u=typeof global<"u"?global:null)&&(typeof window<"u"||typeof global>"u"||(global.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},global.console||(global.console={}),(typeof global.console.log>"u"||typeof global.console.error>"u")&&(global.console.error=global.console.log=global.console.log||function(){console.log(arguments)}),typeof document>"u"&&(u.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var o={getContext:function(){return o},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return o},u.HTMLVideoElement=function(){}),typeof location>"u"&&(u.location={protocol:"file:",href:"",hash:""}),typeof screen>"u"&&(u.screen={width:0,height:0}),typeof W>"u"&&(u.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),u.window=global));var $=window.requestAnimationFrame;if(typeof $>"u")if(typeof webkitRequestAnimationFrame<"u")$=webkitRequestAnimationFrame;else if(typeof mozRequestAnimationFrame<"u")$=mozRequestAnimationFrame;else if(typeof msRequestAnimationFrame<"u")$=msRequestAnimationFrame;else if(typeof $>"u"){var ne=0;$=function(u,o){var c=(new Date).getTime(),p=Math.max(0,16-(c-ne)),v=setTimeout(function(){u(c+p)},p);return ne=c+p,v}}var G=window.cancelAnimationFrame;typeof G>"u"&&(typeof webkitCancelAnimationFrame<"u"?G=webkitCancelAnimationFrame:typeof mozCancelAnimationFrame<"u"?G=mozCancelAnimationFrame:typeof msCancelAnimationFrame<"u"?G=msCancelAnimationFrame:typeof G>"u"&&(G=function(u){clearTimeout(u)}));var H=window.AudioContext;typeof H>"u"&&(typeof webkitAudioContext<"u"&&(H=webkitAudioContext),typeof mozAudioContext<"u"&&(H=mozAudioContext));var W=window.URL;typeof W>"u"&&typeof webkitURL<"u"&&(W=webkitURL),typeof navigator<"u"&&typeof navigator.getUserMedia>"u"&&(typeof navigator.webkitGetUserMedia<"u"&&(navigator.getUserMedia=navigator.webkitGetUserMedia),typeof navigator.mozGetUserMedia<"u"&&(navigator.getUserMedia=navigator.mozGetUserMedia));var F=!(-1===navigator.userAgent.indexOf("Edge")||!navigator.msSaveBlob&&!navigator.msSaveOrOpenBlob),_=!!window.opera||-1!==navigator.userAgent.indexOf("OPR/"),k=navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&"netscape"in window&&/ rv:/.test(navigator.userAgent),N=!_&&!F&&!!navigator.webkitGetUserMedia||Te()||-1!==navigator.userAgent.toLowerCase().indexOf("chrome/"),re=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);re&&!N&&-1!==navigator.userAgent.indexOf("CriOS")&&(re=!1,N=!0);var ie=window.MediaStream;function fe(u){if(0===u)return"0 Bytes";var p=parseInt(Math.floor(Math.log(u)/Math.log(1e3)),10);return(u/Math.pow(1e3,p)).toPrecision(3)+" "+["Bytes","KB","MB","GB","TB"][p]}function be(u,o){if(!u)throw"Blob object is required.";if(!u.type)try{u.type="video/webm"}catch{}var c=(u.type||"video/webm").split("/")[1];if(-1!==c.indexOf(";")&&(c=c.split(";")[0]),o&&-1!==o.indexOf(".")){var p=o.split(".");o=p[0],c=p[1]}var v=(o||Math.round(9999999999*Math.random())+888888888)+"."+c;if(typeof navigator.msSaveOrOpenBlob<"u")return navigator.msSaveOrOpenBlob(u,v);if(typeof navigator.msSaveBlob<"u")return navigator.msSaveBlob(u,v);var f=document.createElement("a");f.href=W.createObjectURL(u),f.download=v,f.style="display:none;opacity:0;color:transparent;",(document.body||document.documentElement).appendChild(f),"function"==typeof f.click?f.click():(f.target="_blank",f.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))),W.revokeObjectURL(f.href)}function Te(){return!!(typeof window<"u"&&"object"==typeof window.process&&"renderer"===window.process.type||typeof process<"u"&&"object"==typeof process.versions&&process.versions.electron||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}function ee(u,o){return u&&u.getTracks?u.getTracks().filter(function(c){return c.kind===(o||"audio")}):[]}function ve(u,o){"srcObject"in o?o.srcObject=u:"mozSrcObject"in o?o.mozSrcObject=u:o.srcObject=u}typeof ie>"u"&&typeof webkitMediaStream<"u"&&(ie=webkitMediaStream),typeof ie<"u"&&typeof ie.prototype.stop>"u"&&(ie.prototype.stop=function(){this.getTracks().forEach(function(u){u.stop()})}),y.invokeSaveAsDialog=be,y.getTracks=ee,y.getSeekableBlob=function we(u,o){if(typeof EBML>"u")throw new Error("Please link: https://www.webrtc-experiment.com/EBML.js");var c=new EBML.Reader,p=new EBML.Decoder,v=EBML.tools,f=new FileReader;f.onload=function(w){p.decode(this.result).forEach(function(R){c.read(R)}),c.stop();var C=v.makeMetadataSeekable(c.metadatas,c.duration,c.cues),E=this.result.slice(c.metadataSize),S=new Blob([C,E],{type:"video/webm"});o(S)},f.readAsArrayBuffer(u)},y.bytesToSize=fe,y.isElectron=Te;var Le={};function Ue(){if(k||re||F)return!0;navigator;var f,w,o=navigator.userAgent,c=""+parseFloat(navigator.appVersion),p=parseInt(navigator.appVersion,10);return(N||_)&&(f=o.indexOf("Chrome"),c=o.substring(f+7)),-1!==(w=c.indexOf(";"))&&(c=c.substring(0,w)),-1!==(w=c.indexOf(" "))&&(c=c.substring(0,w)),p=parseInt(""+c,10),isNaN(p)&&(c=""+parseFloat(navigator.appVersion),p=parseInt(navigator.appVersion,10)),p>=49}function me(u,o){var c,S=this;if(typeof u>"u")throw'First argument "MediaStream" is required.';if(typeof MediaRecorder>"u")throw"Your browser does not support the Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.";"audio"===(o=o||{mimeType:"video/webm"}).type&&(ee(u,"video").length&&ee(u,"audio").length&&(navigator.mozGetUserMedia?(c=new ie).addTrack(ee(u,"audio")[0]):c=new ie(ee(u,"audio")),u=c),(!o.mimeType||-1===o.mimeType.toString().toLowerCase().indexOf("audio"))&&(o.mimeType=N?"audio/webm":"audio/ogg"),o.mimeType&&"audio/ogg"!==o.mimeType.toString().toLowerCase()&&navigator.mozGetUserMedia&&(o.mimeType="audio/ogg"));var d,p=[];function v(){S.timestamps.push((new Date).getTime()),"function"==typeof o.onTimeStamp&&o.onTimeStamp(S.timestamps[S.timestamps.length-1],S.timestamps)}function f(R){return d&&d.mimeType?d.mimeType:R.mimeType||"video/webm"}function w(){p=[],d=null,S.timestamps=[]}this.getArrayOfBlobs=function(){return p},this.record=function(){S.blob=null,S.clearRecordedData(),S.timestamps=[],E=[],p=[];var R=o;o.disableLogs||console.log("Passing following config over MediaRecorder API.",R),d&&(d=null),N&&!Ue()&&(R="video/vp8"),"function"==typeof MediaRecorder.isTypeSupported&&R.mimeType&&(MediaRecorder.isTypeSupported(R.mimeType)||(o.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",R.mimeType),R.mimeType="audio"===o.type?"audio/webm":"video/webm"));try{d=new MediaRecorder(u,R),o.mimeType=R.mimeType}catch{d=new MediaRecorder(u)}R.mimeType&&!MediaRecorder.isTypeSupported&&"canRecordMimeType"in d&&!1===d.canRecordMimeType(R.mimeType)&&(o.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",R.mimeType)),d.ondataavailable=function(A){if(A.data&&E.push("ondataavailable: "+fe(A.data.size)),"number"!=typeof o.timeSlice)!A.data||!A.data.size||A.data.size<100||S.blob?S.recordingCallback&&(S.recordingCallback(new Blob([],{type:f(R)})),S.recordingCallback=null):(S.blob=o.getNativeBlob?A.data:new Blob([A.data],{type:f(R)}),S.recordingCallback&&(S.recordingCallback(S.blob),S.recordingCallback=null));else if(A.data&&A.data.size&&(p.push(A.data),v(),"function"==typeof o.ondataavailable)){var P=o.getNativeBlob?A.data:new Blob([A.data],{type:f(R)});o.ondataavailable(P)}},d.onstart=function(){E.push("started")},d.onpause=function(){E.push("paused")},d.onresume=function(){E.push("resumed")},d.onstop=function(){E.push("stopped")},d.onerror=function(A){A&&(A.name||(A.name="UnknownError"),E.push("error: "+A),o.disableLogs||(-1!==A.name.toString().toLowerCase().indexOf("invalidstate")?console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.",A):-1!==A.name.toString().toLowerCase().indexOf("notsupported")?console.error("MIME type (",R.mimeType,") is not supported.",A):-1!==A.name.toString().toLowerCase().indexOf("security")?console.error("MediaRecorder security error",A):"OutOfMemory"===A.name?console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.",A):"IllegalStreamModification"===A.name?console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.",A):"OtherRecordingError"===A.name?console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.",A):"GenericError"===A.name?console.error("The UA cannot provide the codec or recording option that has been requested.",A):console.error("MediaRecorder Error",A)),function(P){if(!S.manuallyStopped&&d&&"inactive"===d.state)return delete o.timeslice,void d.start(6e5);setTimeout(void 0,1e3)}(),"inactive"!==d.state&&"stopped"!==d.state&&d.stop())},"number"==typeof o.timeSlice?(v(),d.start(o.timeSlice)):d.start(36e5),o.initCallback&&o.initCallback()},this.timestamps=[],this.stop=function(R){R=R||function(){},S.manuallyStopped=!0,d&&(this.recordingCallback=R,"recording"===d.state&&d.stop(),"number"==typeof o.timeSlice&&setTimeout(function(){S.blob=new Blob(p,{type:f(o)}),S.recordingCallback(S.blob)},100))},this.pause=function(){d&&"recording"===d.state&&d.pause()},this.resume=function(){d&&"paused"===d.state&&d.resume()},this.clearRecordedData=function(){d&&"recording"===d.state&&S.stop(w),w()},this.getInternalRecorder=function(){return d},this.blob=null,this.getState=function(){return d&&d.state||"inactive"};var E=[];this.getAllStates=function(){return E},typeof o.checkForInactiveTracks>"u"&&(o.checkForInactiveTracks=!1),S=this,function R(){if(d&&!1!==o.checkForInactiveTracks){if(!1===function C(){if("active"in u){if(!u.active)return!1}else if("ended"in u&&u.ended)return!1;return!0}())return o.disableLogs||console.log("MediaStream seems stopped."),void S.stop();setTimeout(R,1e3)}}(),this.name="MediaStreamRecorder",this.toString=function(){return this.name}}function ke(u,o){if(!ee(u,"audio").length)throw"Your stream has no audio tracks.";var d,c=this,p=[],v=[],f=!1,w=0,C=2,E=(o=o||{}).desiredSampRate;function S(){if(!1===o.checkForInactiveTracks)return!0;if("active"in u){if(!u.active)return!1}else if("ended"in u&&u.ended)return!1;return!0}function R(z,pe){function J(le,qe){var Ke,Pe=le.numberOfAudioChannels,ye=le.leftBuffers.slice(0),Be=le.rightBuffers.slice(0),Oe=le.sampleRate,De=le.internalInterleavedLength,_e=le.desiredSampRate;function Ee(ce,Ae,Ce){var Se=Math.round(ce.length*(Ae/Ce)),ge=[],Me=Number((ce.length-1)/(Se-1));ge[0]=ce[0];for(var Ze=1;Ze<Se-1;Ze++){var ot=Ze*Me,ut=Number(Math.floor(ot)).toFixed(),$e=Number(Math.ceil(ot)).toFixed();ge[Ze]=Ge(ce[ut],ce[$e],ot-ut)}return ge[Se-1]=ce[ce.length-1],ge}function Ge(ce,Ae,Ce){return ce+(Ae-ce)*Ce}function tt(ce,Ae){for(var Ce=new Float64Array(Ae),Se=0,ge=ce.length,Me=0;Me<ge;Me++){var Ze=ce[Me];Ce.set(Ze,Se),Se+=Ze.length}return Ce}function Ye(ce,Ae,Ce){for(var Se=Ce.length,ge=0;ge<Se;ge++)ce.setUint8(Ae+ge,Ce.charCodeAt(ge))}2===Pe&&(ye=tt(ye,De),Be=tt(Be,De),_e&&(ye=Ee(ye,_e,Oe),Be=Ee(Be,_e,Oe))),1===Pe&&(ye=tt(ye,De),_e&&(ye=Ee(ye,_e,Oe))),_e&&(Oe=_e),2===Pe&&(Ke=function pt(ce,Ae){for(var Ce=ce.length+Ae.length,Se=new Float64Array(Ce),ge=0,Me=0;Me<Ce;)Se[Me++]=ce[ge],Se[Me++]=Ae[ge],ge++;return Se}(ye,Be)),1===Pe&&(Ke=ye);var Qe=Ke.length,rt=new ArrayBuffer(44+2*Qe),se=new DataView(rt);Ye(se,0,"RIFF"),se.setUint32(4,36+2*Qe,!0),Ye(se,8,"WAVE"),Ye(se,12,"fmt "),se.setUint32(16,16,!0),se.setUint16(20,1,!0),se.setUint16(22,Pe,!0),se.setUint32(24,Oe,!0),se.setUint32(28,Oe*Pe*2,!0),se.setUint16(32,2*Pe,!0),se.setUint16(34,16,!0),Ye(se,36,"data"),se.setUint32(40,2*Qe,!0);for(var gt=Qe,ct=44,it=0;it<gt;it++)se.setInt16(ct,32767*Ke[it],!0),ct+=2;if(qe)return qe({buffer:rt,view:se});postMessage({buffer:rt,view:se})}if(z.noWorker)J(z,function(le){pe(le.buffer,le.view)});else{var Ie=function A(z){var pe=W.createObjectURL(new Blob([z.toString(),";this.onmessage =  function (eee) {"+z.name+"(eee.data);}"],{type:"application/javascript"})),J=new Worker(pe);return J.workerURL=pe,J}(J);Ie.onmessage=function(le){pe(le.data.buffer,le.data.view),W.revokeObjectURL(Ie.workerURL),Ie.terminate()},Ie.postMessage(z)}}!0===o.leftChannel&&(C=1),1===o.numberOfAudioChannels&&(C=1),(!C||C<1)&&(C=2),o.disableLogs||console.log("StereoAudioRecorder is set to record number of channels: "+C),typeof o.checkForInactiveTracks>"u"&&(o.checkForInactiveTracks=!0),this.record=function(){if(!1===S())throw"Please make sure MediaStream is active.";O(),g=b=!1,f=!0,typeof o.timeSlice<"u"&&te()},this.stop=function(z){z=z||function(){},f=!1,R({desiredSampRate:E,sampleRate:T,numberOfAudioChannels:C,internalInterleavedLength:w,leftBuffers:p,rightBuffers:1===C?[]:v,noWorker:o.noWorker},function(pe,J){c.blob=new Blob([J],{type:"audio/wav"}),c.buffer=new ArrayBuffer(J.buffer.byteLength),c.view=J,c.sampleRate=E||T,c.bufferSize=q,c.length=w,g=!1,z&&z(c.blob)})},typeof y.Storage>"u"&&(y.Storage={AudioContextConstructor:null,AudioContext:window.AudioContext||window.webkitAudioContext}),(!y.Storage.AudioContextConstructor||"closed"===y.Storage.AudioContextConstructor.state)&&(y.Storage.AudioContextConstructor=new y.Storage.AudioContext);var P=y.Storage.AudioContextConstructor,m=P.createMediaStreamSource(u),B=[0,256,512,1024,2048,4096,8192,16384],q=typeof o.bufferSize>"u"?4096:o.bufferSize;if(-1===B.indexOf(q)&&(o.disableLogs||console.log("Legal values for buffer-size are "+JSON.stringify(B,null,"\t"))),P.createJavaScriptNode)d=P.createJavaScriptNode(q,C,C);else{if(!P.createScriptProcessor)throw"WebAudio API has no support on this browser.";d=P.createScriptProcessor(q,C,C)}m.connect(d),o.bufferSize||(q=d.bufferSize);var T=typeof o.sampleRate<"u"?o.sampleRate:P.sampleRate||44100;(T<22050||T>96e3)&&(o.disableLogs||console.log("sample-rate must be under range 22050 and 96000.")),o.disableLogs||o.desiredSampRate&&console.log("Desired sample-rate: "+o.desiredSampRate);var b=!1;function O(){v=[],w=0,g=!1,f=!1,b=!1,P=null,c.leftchannel=p=[],c.rightchannel=v,c.numberOfAudioChannels=C,c.desiredSampRate=E,c.sampleRate=T,c.recordingLength=w,U={left:[],right:[],recordingLength:0}}function l(){d&&(d.onaudioprocess=null,d.disconnect(),d=null),m&&(m.disconnect(),m=null),O()}this.pause=function(){b=!0},this.resume=function(){if(!1===S())throw"Please make sure MediaStream is active.";if(!f)return o.disableLogs||console.log("Seems recording has been restarted."),void this.record();b=!1},this.clearRecordedData=function(){o.checkForInactiveTracks=!1,f&&this.stop(l),l()},this.name="StereoAudioRecorder",this.toString=function(){return this.name};var g=!1;d.onaudioprocess=function M(z){if(!b){if(!1===S()&&(o.disableLogs||console.log("MediaStream seems stopped."),d.disconnect(),f=!1),!f)return void(m&&(m.disconnect(),m=null));g||(g=!0,o.onAudioProcessStarted&&o.onAudioProcessStarted(),o.initCallback&&o.initCallback());var pe=z.inputBuffer.getChannelData(0),J=new Float32Array(pe);if(p.push(J),2===C){var Ie=z.inputBuffer.getChannelData(1),le=new Float32Array(Ie);v.push(le)}c.recordingLength=w+=q,typeof o.timeSlice<"u"&&(U.recordingLength+=q,U.left.push(J),2===C&&U.right.push(le))}},d.connect(P.createMediaStreamDestination?P.createMediaStreamDestination():P.destination),this.leftchannel=p,this.rightchannel=v,this.numberOfAudioChannels=C,this.desiredSampRate=E,this.sampleRate=T,c.recordingLength=w;var U={left:[],right:[],recordingLength:0};function te(){!f||"function"!=typeof o.ondataavailable||typeof o.timeSlice>"u"||(U.left.length?(R({desiredSampRate:E,sampleRate:T,numberOfAudioChannels:C,internalInterleavedLength:U.recordingLength,leftBuffers:U.left,rightBuffers:1===C?[]:U.right},function(z,pe){var J=new Blob([pe],{type:"audio/wav"});o.ondataavailable(J),setTimeout(te,o.timeSlice)}),U={left:[],right:[],recordingLength:0}):setTimeout(te,o.timeSlice))}}function Re(u,o){if(typeof html2canvas>"u")throw"Please link: https://www.webrtc-experiment.com/screenshot.js";(o=o||{}).frameInterval||(o.frameInterval=10);var c=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(B){B in document.createElement("canvas")&&(c=!0)});var w,d,C,p=!(!window.webkitRTCPeerConnection&&!window.webkitGetUserMedia||!window.chrome),v=50,f=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);if(p&&f&&f[2]&&(v=parseInt(f[2],10)),p&&v<52&&(c=!1),o.useWhammyRecorder&&(c=!1),c)if(o.disableLogs||console.log("Your browser supports both MediRecorder API and canvas.captureStream!"),u instanceof HTMLCanvasElement)w=u;else{if(!(u instanceof CanvasRenderingContext2D))throw"Please pass either HTMLCanvasElement or CanvasRenderingContext2D.";w=u.canvas}else navigator.mozGetUserMedia&&(o.disableLogs||console.error("Canvas recording is NOT supported in Firefox."));this.record=function(){if(C=!0,c&&!o.useWhammyRecorder){var B;"captureStream"in w?B=w.captureStream(25):"mozCaptureStream"in w?B=w.mozCaptureStream(25):"webkitCaptureStream"in w&&(B=w.webkitCaptureStream(25));try{var q=new ie;q.addTrack(ee(B,"video")[0]),B=q}catch{}if(!B)throw"captureStream API are NOT available.";(d=new me(B,{mimeType:o.mimeType||"video/webm"})).record()}else m.frames=[],P=(new Date).getTime(),A();o.initCallback&&o.initCallback()},this.getWebPImages=function(B){if("canvas"===u.nodeName.toLowerCase()){var q=m.frames.length;m.frames.forEach(function(T,b){var O=q-b;o.disableLogs||console.log(O+"/"+q+" frames remaining"),o.onEncodingCallback&&o.onEncodingCallback(O,q);var l=T.image.toDataURL("image/webp",1);m.frames[b].image=l}),o.disableLogs||console.log("Generating WebM"),B()}else B()},this.stop=function(B){C=!1;var q=this;c&&d?d.stop(B):this.getWebPImages(function(){m.compile(function(T){o.disableLogs||console.log("Recording finished!"),q.blob=T,q.blob.forEach&&(q.blob=new Blob([],{type:"video/webm"})),B&&B(q.blob),m.frames=[]})})};var E=!1;function S(){m.frames=[],C=!1,E=!1}function R(){var B=document.createElement("canvas"),q=B.getContext("2d");return B.width=u.width,B.height=u.height,q.drawImage(u,0,0),B}function A(){if(E)return P=(new Date).getTime(),setTimeout(A,500);if("canvas"===u.nodeName.toLowerCase()){var B=(new Date).getTime()-P;return P=(new Date).getTime(),m.frames.push({image:R(),duration:B}),void(C&&setTimeout(A,o.frameInterval))}html2canvas(u,{grabMouse:typeof o.showMousePointer>"u"||o.showMousePointer,onrendered:function(q){var T=(new Date).getTime()-P;if(!T)return setTimeout(A,o.frameInterval);P=(new Date).getTime(),m.frames.push({image:q.toDataURL("image/webp",1),duration:T}),C&&setTimeout(A,o.frameInterval)}})}this.pause=function(){E=!0,d instanceof me&&d.pause()},this.resume=function(){E=!1,d instanceof me?d.resume():C||this.record()},this.clearRecordedData=function(){C&&this.stop(S),S()},this.name="CanvasRecorder",this.toString=function(){return this.name};var P=(new Date).getTime(),m=new V.Video(100)}function Ne(u,o){function c(P){P=typeof P<"u"?P:10;var m=(new Date).getTime()-R;return m?w?(R=(new Date).getTime(),setTimeout(c,100)):(R=(new Date).getTime(),S.paused&&S.play(),E.drawImage(S,0,0,C.width,C.height),A.frames.push({duration:m,image:C.toDataURL("image/webp")}),void(f||setTimeout(c,P,P))):setTimeout(c,P,P)}(o=o||{}).frameInterval||(o.frameInterval=10),o.disableLogs||console.log("Using frames-interval:",o.frameInterval),this.record=function(){o.width||(o.width=320),o.height||(o.height=240),o.video||(o.video={width:o.width,height:o.height}),o.canvas||(o.canvas={width:o.width,height:o.height}),C.width=o.canvas.width||320,C.height=o.canvas.height||240,E=C.getContext("2d"),o.video&&o.video instanceof HTMLVideoElement?(S=o.video.cloneNode(),o.initCallback&&o.initCallback()):(S=document.createElement("video"),ve(u,S),S.onloadedmetadata=function(){o.initCallback&&o.initCallback()},S.width=o.video.width,S.height=o.video.height),S.muted=!0,S.play(),R=(new Date).getTime(),A=new V.Video,o.disableLogs||(console.log("canvas resolutions",C.width,"*",C.height),console.log("video width/height",S.width||C.width,"*",S.height||C.height)),c(o.frameInterval)};var f=!1;this.stop=function(P){P=P||function(){},f=!0;var m=this;setTimeout(function(){!function v(P,m,B,q,T){var b=document.createElement("canvas");b.width=C.width,b.height=C.height;var O=b.getContext("2d"),l=[],g=-1===m,M=m&&m>0&&m<=P.length?m:P.length,te=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),z=B&&B>=0&&B<=1?B:0,pe=q&&q>=0&&q<=1?q:0,J=!1;!function p(P){var m=-1,B=P.length;!function q(){++m!==B?setTimeout(function(){P.functionToLoop(q,m)},1):P.callback()}()}({length:M,functionToLoop:function(Ie,le){var qe,Pe,ye,Be=function(){!J&&ye-qe<=ye*pe||(g&&(J=!0),l.push(P[le])),Ie()};if(J)Be();else{var Oe=new Image;Oe.onload=function(){O.drawImage(Oe,0,0,C.width,C.height);var De=O.getImageData(0,0,C.width,C.height);qe=0,Pe=De.data.length,ye=De.data.length/4;for(var _e=0;_e<Pe;_e+=4){var Ee={r:De.data[_e],g:De.data[_e+1],b:De.data[_e+2]};Math.sqrt(Math.pow(Ee.r-0,2)+Math.pow(Ee.g-0,2)+Math.pow(Ee.b-0,2))<=te*z&&qe++}Be()},Oe.src=P[le].image}},callback:function(){(l=l.concat(P.slice(M))).length<=0&&l.push(P[P.length-1]),T(l)}})}(A.frames,-1,null,null,function(B){A.frames=B,o.advertisement&&o.advertisement.length&&(A.frames=o.advertisement.concat(A.frames)),A.compile(function(q){m.blob=q,m.blob.forEach&&(m.blob=new Blob([],{type:"video/webm"})),P&&P(m.blob)})})},10)};var w=!1;function d(){A.frames=[],f=!0,w=!1}this.pause=function(){w=!0},this.resume=function(){w=!1,f&&this.record()},this.clearRecordedData=function(){f||this.stop(d),d()},this.name="WhammyRecorder",this.toString=function(){return this.name};var S,R,A,C=document.createElement("canvas"),E=C.getContext("2d")}typeof H<"u"?Le.AudioContext=H:typeof webkitAudioContext<"u"&&(Le.AudioContext=webkitAudioContext),y.Storage=Le,y.MediaStreamRecorder=me,y.StereoAudioRecorder=ke,y.CanvasRecorder=Re,y.WhammyRecorder=Ne;var V=function(){function u(p){this.frames=[],this.duration=p||1,this.quality=.8}function c(p){function f(b,O,l){return[{data:b,id:231}].concat(l.map(function(g){var M=function A(b){var O=0;if(b.keyframe&&(O|=128),b.invisible&&(O|=8),b.lacing&&(O|=b.lacing<<1),b.discardable&&(O|=1),b.trackNum>127)throw"TrackNumber > 127 not supported";var l=[128|b.trackNum,b.timecode>>8,255&b.timecode,O].map(function(g){return String.fromCharCode(g)}).join("")+b.frame;return l}({discardable:0,frame:g.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(O)});return O+=g.duration,{data:M,id:163}}))}function d(b){for(var O=[];b>0;)O.push(255&b),b>>=8;return new Uint8Array(O.reverse())}function C(b){return new Uint8Array(b.split("").map(function(O){return O.charCodeAt(0)}))}function E(b){var O=[];b=(b.length%8?new Array(9-b.length%8).join("0"):"")+b;for(var g=0;g<b.length;g+=8)O.push(parseInt(b.substr(g,8),2));return new Uint8Array(O)}function S(b){for(var O=[],l=0;l<b.length;l++){var g=b[l].data;"object"==typeof g&&(g=S(g)),"number"==typeof g&&(g=E(g.toString(2))),"string"==typeof g&&(g=C(g));var M=g.size||g.byteLength||g.length,U=Math.ceil(Math.ceil(Math.log(M)/Math.log(2))/8),te=M.toString(2),z=new Array(7*U+7+1-te.length).join("0")+te,pe=new Array(U).join("0")+"1"+z;O.push(d(b[l].id)),O.push(E(pe)),O.push(g)}return new Blob(O,{type:"video/webm"})}function m(b,O){return parseInt(b.substr(O+4,4).split("").map(function(l){var g=l.charCodeAt(0).toString(2);return new Array(8-g.length+1).join("0")+g}).join(""),2)}function B(b){for(var O=0,l={};O<b.length;){var g=b.substr(O,4),M=m(b,O),U=b.substr(O+4+4,M);O+=8+M,l[g]=l[g]||[],l[g].push("RIFF"===g||"LIST"===g?B(U):U)}return l}function q(b){return[].slice.call(new Uint8Array(new Float64Array([b]).buffer),0).map(function(O){return String.fromCharCode(O)}).reverse().join("")}var T=new function v(b){var O=function w(b){if(b[0]){for(var O=b[0].width,l=b[0].height,g=b[0].duration,M=1;M<b.length;M++)g+=b[M].duration;return{duration:g,width:O,height:l}}postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."})}(b);if(!O)return[];for(var g=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:q(O.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:O.width,id:176},{data:O.height,id:186}]}]}]}]}],M=0,U=0;M<b.length;){var te=[],z=0;do{te.push(b[M]),z+=b[M].duration,M++}while(M<b.length&&z<3e4);var J={id:524531317,data:f(U,0,te)};g[1].data.push(J),U+=z}return S(g)}(p.map(function(b){var O=function P(b){for(var O=b.RIFF[0].WEBP[0],l=O.indexOf("\x9d\x01*"),g=0,M=[];g<4;g++)M[g]=O.charCodeAt(l+3+g);return{width:16383&(M[1]<<8|M[0]),height:16383&(M[3]<<8|M[2]),data:O,riff:b}}(B(atob(b.image.slice(23))));return O.duration=b.duration,O}));postMessage(T)}return u.prototype.add=function(p,v){if("canvas"in p&&(p=p.canvas),"toDataURL"in p&&(p=p.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/gi.test(p))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:p,duration:v||this.duration})},u.prototype.compile=function(p){var v=function o(p){var v=W.createObjectURL(new Blob([p.toString(),"this.onmessage =  function (eee) {"+p.name+"(eee.data);}"],{type:"application/javascript"})),f=new Worker(v);return W.revokeObjectURL(v),f}(c);v.onmessage=function(f){f.data.error?console.error(f.data.error):p(f.data)},v.postMessage(this.frames)},{Video:u}}();y.Whammy=V;var oe={init:function(){var u=this;if(typeof indexedDB>"u"||typeof indexedDB.open>"u")console.error("IndexedDB API are not available in this browser.");else{var p,c=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),v=indexedDB.open(c,1);v.onerror=u.onError,v.onsuccess=function(){(p=v.result).onerror=u.onError,p.setVersion&&1!==p.version?p.setVersion(1).onsuccess=function(){f(p),w()}:w()},v.onupgradeneeded=function(d){f(d.target.result)}}function f(d){d.createObjectStore(u.dataStoreName)}function w(){var d=p.transaction([u.dataStoreName],"readwrite");function C(E){d.objectStore(u.dataStoreName).get(E).onsuccess=function(S){u.callback&&u.callback(S.target.result,E)}}u.videoBlob&&d.objectStore(u.dataStoreName).put(u.videoBlob,"videoBlob"),u.gifBlob&&d.objectStore(u.dataStoreName).put(u.gifBlob,"gifBlob"),u.audioBlob&&d.objectStore(u.dataStoreName).put(u.audioBlob,"audioBlob"),C("audioBlob"),C("videoBlob"),C("gifBlob")}},Fetch:function(u){return this.callback=u,this.init(),this},Store:function(u){return this.audioBlob=u.audioBlob,this.videoBlob=u.videoBlob,this.gifBlob=u.gifBlob,this.init(),this},onError:function(u){console.error(JSON.stringify(u,null,"\t"))},dataStoreName:"recordRTC",dbName:null};function D(u,o){if(typeof GIFEncoder>"u"){var c=document.createElement("script");c.src="https://www.webrtc-experiment.com/gif-recorder.js",(document.body||document.documentElement).appendChild(c)}o=o||{};var p=u instanceof CanvasRenderingContext2D||u instanceof HTMLCanvasElement;this.record=function(){typeof GIFEncoder>"u"?setTimeout(B.record,1e3):C?(p||(o.width||(o.width=E.offsetWidth||320),o.height||(o.height=E.offsetHeight||240),o.video||(o.video={width:o.width,height:o.height}),o.canvas||(o.canvas={width:o.width,height:o.height}),w.width=o.canvas.width||320,w.height=o.canvas.height||240,E.width=o.video.width||320,E.height=o.video.height||240),(m=new GIFEncoder).setRepeat(0),m.setDelay(o.frameRate||200),m.setQuality(o.quality||10),m.start(),"function"==typeof o.onGifRecordingStarted&&o.onGifRecordingStarted(),Date.now(),S=$(function q(T){if(!0!==B.clearedRecordedData){if(v)return setTimeout(function(){q(T)},100);S=$(q),void 0===typeof P&&(P=T),!(T-P<90)&&(!p&&E.paused&&E.play(),p||d.drawImage(E,0,0,w.width,w.height),o.onGifPreview&&o.onGifPreview(w.toDataURL("image/png")),m.addFrame(d),P=T)}}),o.initCallback&&o.initCallback()):setTimeout(B.record,1e3)},this.stop=function(q){q=q||function(){},S&&G(S),Date.now(),this.blob=new Blob([new Uint8Array(m.stream().bin)],{type:"image/gif"}),q(this.blob),m.stream().bin=[]};var v=!1;this.pause=function(){v=!0},this.resume=function(){v=!1},this.clearRecordedData=function(){B.clearedRecordedData=!0,function f(){m&&(m.stream().bin=[])}()},this.name="GifRecorder",this.toString=function(){return this.name};var w=document.createElement("canvas"),d=w.getContext("2d");p&&(u instanceof CanvasRenderingContext2D?w=(d=u).canvas:u instanceof HTMLCanvasElement&&(d=u.getContext("2d"),w=u));var C=!0;if(!p){var E=document.createElement("video");E.muted=!0,E.autoplay=!0,E.playsInline=!0,C=!1,E.onloadedmetadata=function(){C=!0},ve(u,E),E.play()}var P,m,S=null,B=this}function ae(u,o){typeof global<"u"&&global,o=o||"multi-streams-mixer";var p=[],v=!1,f=document.createElement("canvas"),w=f.getContext("2d");f.style.opacity=0,f.style.position="absolute",f.style.zIndex=-1,f.style.top="-1000em",f.style.left="-1000em",f.className=o,(document.body||document.documentElement).appendChild(f),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0;var d=this,C=window.AudioContext;typeof C>"u"&&(typeof webkitAudioContext<"u"&&(C=webkitAudioContext),typeof mozAudioContext<"u"&&(C=mozAudioContext));var E=window.URL;typeof E>"u"&&typeof webkitURL<"u"&&(E=webkitURL),typeof navigator<"u"&&typeof navigator.getUserMedia>"u"&&(typeof navigator.webkitGetUserMedia<"u"&&(navigator.getUserMedia=navigator.webkitGetUserMedia),typeof navigator.mozGetUserMedia<"u"&&(navigator.getUserMedia=navigator.mozGetUserMedia));var S=window.MediaStream;typeof S>"u"&&typeof webkitMediaStream<"u"&&(S=webkitMediaStream),typeof S<"u"&&typeof S.prototype.stop>"u"&&(S.prototype.stop=function(){this.getTracks().forEach(function(l){l.stop()})});var R={};function P(){if(!v){var l=p.length,g=!1,M=[];if(p.forEach(function(te){te.stream||(te.stream={}),te.stream.fullcanvas?g=te:M.push(te)}),g)f.width=g.stream.width,f.height=g.stream.height;else if(M.length){f.width=l>1?2*M[0].width:M[0].width;var U=1;(3===l||4===l)&&(U=2),(5===l||6===l)&&(U=3),(7===l||8===l)&&(U=4),(9===l||10===l)&&(U=5),f.height=M[0].height*U}else f.width=d.width||360,f.height=d.height||240;g&&g instanceof HTMLVideoElement&&m(g),M.forEach(function(te,z){m(te,z)}),setTimeout(P,d.frameInterval)}}function m(l,g){if(!v){var M=0,U=0,te=l.width,z=l.height;1===g&&(M=l.width),2===g&&(U=l.height),3===g&&(M=l.width,U=l.height),4===g&&(U=2*l.height),5===g&&(M=l.width,U=2*l.height),6===g&&(U=3*l.height),7===g&&(M=l.width,U=3*l.height),typeof l.stream.left<"u"&&(M=l.stream.left),typeof l.stream.top<"u"&&(U=l.stream.top),typeof l.stream.width<"u"&&(te=l.stream.width),typeof l.stream.height<"u"&&(z=l.stream.height),w.drawImage(l,M,U,te,z),"function"==typeof l.stream.onRender&&l.stream.onRender(w,M,U,te,z,g)}}function b(l){var g=document.createElement("video");return function A(l,g){"srcObject"in g?g.srcObject=l:"mozSrcObject"in g?g.mozSrcObject=l:g.srcObject=l}(l,g),g.className=o,g.muted=!0,g.volume=0,g.width=l.width||d.width||360,g.height=l.height||d.height||240,g.play(),g}function O(l){p=[],(l=l||u).forEach(function(g){if(g.getTracks().filter(function(U){return"video"===U.kind}).length){var M=b(g);M.stream=g,p.push(M)}})}typeof C<"u"?R.AudioContext=C:typeof webkitAudioContext<"u"&&(R.AudioContext=webkitAudioContext),this.startDrawingFrames=function(){P()},this.appendStreams=function(l){if(!l)throw"First parameter is required.";l instanceof Array||(l=[l]),l.forEach(function(g){var M=new S;if(g.getTracks().filter(function(z){return"video"===z.kind}).length){var U=b(g);U.stream=g,p.push(U),M.addTrack(g.getTracks().filter(function(z){return"video"===z.kind})[0])}if(g.getTracks().filter(function(z){return"audio"===z.kind}).length){var te=d.audioContext.createMediaStreamSource(g);d.audioDestination=d.audioContext.createMediaStreamDestination(),te.connect(d.audioDestination),M.addTrack(d.audioDestination.stream.getTracks().filter(function(z){return"audio"===z.kind})[0])}u.push(M)})},this.releaseStreams=function(){p=[],v=!0,d.gainNode&&(d.gainNode.disconnect(),d.gainNode=null),d.audioSources.length&&(d.audioSources.forEach(function(l){l.disconnect()}),d.audioSources=[]),d.audioDestination&&(d.audioDestination.disconnect(),d.audioDestination=null),d.audioContext&&d.audioContext.close(),d.audioContext=null,w.clearRect(0,0,f.width,f.height),f.stream&&(f.stream.stop(),f.stream=null)},this.resetVideoStreams=function(l){l&&!(l instanceof Array)&&(l=[l]),O(l)},this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=function B(){v=!1;var l=function q(){var l;O(),"captureStream"in f?l=f.captureStream():"mozCaptureStream"in f?l=f.mozCaptureStream():d.disableLogs||console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features");var g=new S;return l.getTracks().filter(function(M){return"video"===M.kind}).forEach(function(M){g.addTrack(M)}),f.stream=g,g}(),g=function T(){R.AudioContextConstructor||(R.AudioContextConstructor=new R.AudioContext),d.audioContext=R.AudioContextConstructor,d.audioSources=[],!0===d.useGainNode&&(d.gainNode=d.audioContext.createGain(),d.gainNode.connect(d.audioContext.destination),d.gainNode.gain.value=0);var l=0;if(u.forEach(function(g){if(g.getTracks().filter(function(U){return"audio"===U.kind}).length){l++;var M=d.audioContext.createMediaStreamSource(g);!0===d.useGainNode&&M.connect(d.gainNode),d.audioSources.push(M)}}),l)return d.audioDestination=d.audioContext.createMediaStreamDestination(),d.audioSources.forEach(function(g){g.connect(d.audioDestination)}),d.audioDestination.stream}();return g&&g.getTracks().filter(function(U){return"audio"===U.kind}).forEach(function(U){l.addTrack(U)}),u.forEach(function(U){}),l}}function ue(u,o){u=u||[];var p,v,c=this;(o=o||{elementClass:"multi-streams-mixer",mimeType:"video/webm",video:{width:360,height:240}}).frameInterval||(o.frameInterval=10),o.video||(o.video={}),o.video.width||(o.video.width=360),o.video.height||(o.video.height=240),this.record=function(){p=new ae(u,o.elementClass||"multi-streams-mixer"),function f(){var w=[];return u.forEach(function(d){ee(d,"video").forEach(function(C){w.push(C)})}),w}().length&&(p.frameInterval=o.frameInterval||10,p.width=o.video.width||360,p.height=o.video.height||240,p.startDrawingFrames()),o.previewStream&&"function"==typeof o.previewStream&&o.previewStream(p.getMixedStream()),(v=new me(p.getMixedStream(),o)).record()},this.stop=function(w){v&&v.stop(function(d){c.blob=d,w(d),c.clearRecordedData()})},this.pause=function(){v&&v.pause()},this.resume=function(){v&&v.resume()},this.clearRecordedData=function(){v&&(v.clearRecordedData(),v=null),p&&(p.releaseStreams(),p=null)},this.addStreams=function(w){if(!w)throw"First parameter is required.";w instanceof Array||(w=[w]),u.concat(w),v&&p&&(p.appendStreams(w),o.previewStream&&"function"==typeof o.previewStream&&o.previewStream(p.getMixedStream()))},this.resetVideoStreams=function(w){p&&(w&&!(w instanceof Array)&&(w=[w]),p.resetVideoStreams(w))},this.getMixer=function(){return p},this.name="MultiStreamRecorder",this.toString=function(){return this.name}}function We(u,o){var p,f,d;function w(S,R){if(!o.workerPath&&!R)return p=!1,void fetch("https://unpkg.com/webm-wasm@latest/dist/webm-worker.js").then(function(P){P.arrayBuffer().then(function(m){w(S,m)})});if(!o.workerPath&&R instanceof ArrayBuffer){var A=new Blob([R],{type:"text/javascript"});o.workerPath=W.createObjectURL(A)}o.workerPath||console.error("workerPath parameter is missing."),(f=new Worker(o.workerPath)).postMessage(o.webAssemblyPath||"https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm"),f.addEventListener("message",function(P){"READY"===P.data?(f.postMessage({width:o.width,height:o.height,bitrate:o.bitrate||1200,timebaseDen:o.frameRate||30,realtime:o.realtime}),function v(){return new ReadableStream({start:function(S){var R=document.createElement("canvas"),A=document.createElement("video"),P=!0;A.srcObject=u,A.muted=!0,A.height=o.height,A.width=o.width,A.volume=0,A.onplaying=function(){R.width=o.width,R.height=o.height;var m=R.getContext("2d"),q=setInterval(function(){if(p&&(clearInterval(q),S.close()),P&&(P=!1,o.onVideoProcessStarted&&o.onVideoProcessStarted()),m.drawImage(A,0,0),"closed"!==S._controlledReadableStream.state)try{S.enqueue(m.getImageData(0,0,o.width,o.height))}catch{}},1e3/o.frameRate)},A.play()}})}().pipeTo(new WritableStream({write:function(m){p?console.error("Got image, but recorder is finished!"):f.postMessage(m.data.buffer,[m.data.buffer])}}))):P.data&&(d||E.push(P.data))})}(typeof ReadableStream>"u"||typeof WritableStream>"u")&&console.error("Following polyfill is strongly recommended: https://unpkg.com/@mattiasbuelens/web-streams-polyfill/dist/polyfill.min.js"),(o=o||{}).width=o.width||640,o.height=o.height||480,o.frameRate=o.frameRate||30,o.bitrate=o.bitrate||1200,o.realtime=o.realtime||!0,this.record=function(){E=[],d=!1,this.blob=null,w(u),"function"==typeof o.initCallback&&o.initCallback()},this.pause=function(){d=!0},this.resume=function(){d=!1};var E=[];this.stop=function(S){p=!0;var R=this;!function C(S){f?(f.addEventListener("message",function(R){null===R.data&&(f.terminate(),f=null,S&&S())}),f.postMessage(null)):S&&S()}(function(){R.blob=new Blob(E,{type:"video/webm"}),S(R.blob)})},this.name="WebAssemblyRecorder",this.toString=function(){return this.name},this.clearRecordedData=function(){E=[],d=!1,this.blob=null},this.blob=null}y.DiskStorage=oe,y.GifRecorder=D,y.MultiStreamRecorder=ue,y.RecordRTCPromisesHandler=function He(u,o){if(!this)throw'Use "new RecordRTCPromisesHandler()"';if(typeof u>"u")throw'First argument "MediaStream" is required.';var c=this;c.recordRTC=new y(u,o),this.startRecording=function(){return new Promise(function(p,v){try{c.recordRTC.startRecording(),p()}catch(f){v(f)}})},this.stopRecording=function(){return new Promise(function(p,v){try{c.recordRTC.stopRecording(function(f){c.blob=c.recordRTC.getBlob(),c.blob&&c.blob.size?p(f):v("Empty blob.",c.blob)})}catch(f){v(f)}})},this.pauseRecording=function(){return new Promise(function(p,v){try{c.recordRTC.pauseRecording(),p()}catch(f){v(f)}})},this.resumeRecording=function(){return new Promise(function(p,v){try{c.recordRTC.resumeRecording(),p()}catch(f){v(f)}})},this.getDataURL=function(p){return new Promise(function(v,f){try{c.recordRTC.getDataURL(function(w){v(w)})}catch(w){f(w)}})},this.getBlob=function(){return new Promise(function(p,v){try{p(c.recordRTC.getBlob())}catch(f){v(f)}})},this.getInternalRecorder=function(){return new Promise(function(p,v){try{p(c.recordRTC.getInternalRecorder())}catch(f){v(f)}})},this.reset=function(){return new Promise(function(p,v){try{p(c.recordRTC.reset())}catch(f){v(f)}})},this.destroy=function(){return new Promise(function(p,v){try{p(c.recordRTC.destroy())}catch(f){v(f)}})},this.getState=function(){return new Promise(function(p,v){try{p(c.recordRTC.getState())}catch(f){v(f)}})},this.blob=null,this.version="5.6.2"},y.WebAssemblyRecorder=We}}]);